{"remainingRequest":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eruda/Documents/GitHub/project_yggdrasill/ui/src/components/IndexPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/src/components/IndexPage.vue","mtime":1614925256000},{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRHJhd0ZvcmNlIGZyb20gIkAvcGx1Z2lucy9kcmF3Rm9yY2UiDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQppbXBvcnQgTm9kZURpYWxvZyBmcm9tICcuL05vZGVEaWFsb2cnDQoNCmxldCB0aW1lcg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiSW5kZXhQYWdlIiwNCiAgY29tcG9uZW50czoge05vZGVEaWFsb2d9LA0KICBpbmplY3Q6IFsncmVsb2FkJ10sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIG5vZGVzOiBbXSwNCiAgICAgIGxpbmtzOiBbXSwNCiAgICAgIHRhZ3M6IHt9LA0KICAgICAgcHJvcGVydGllc0xpc3Q6IFsNCiAgICAgICAge2tleTogJ25hbWUnLCBsYWJlbDpbJ25hbWUnXX0sDQogICAgICAgIHtrZXk6ICdpZGVudE51bScsIGxhYmVsOlsn6Lqr5Lu96K+BJ119LA0KICAgICAgICB7a2V5OiAncG9saWN5TnVtJywgbGFiZWw6Wyfkv53ljZUnLCAn5L+d5Y2V5Y+3J119LA0KICAgICAgICB7a2V5OiAnc3RhcmQnLCBsYWJlbDpbJ+i1t+acnycsICfkv53pmanotbfmnJ8nXX0sDQogICAgICAgIHtrZXk6ICdlbmRkJywgbGFiZWw6WyfmraLmnJ8nLCAn5L+d6Zmp5q2i5pyfJ119LA0KICAgICAgICB7a2V5OiAnYWNjZCcsIGxhYmVsOlsn5Ye66ZmpJywgJ+WHuumZqeaXtumXtCddfSwNCiAgICAgICAge2tleTogJ3BheU51bScsIGxhYmVsOlsn6ZO26KGM5Y2hJ119LA0KICAgICAgICB7a2V5OiAncmVwb3J0RCcsIGxhYmVsOlsn5oql5qGIJywgJ+aKpeahiOaXtumXtCddfSwNCiAgICAgICAge2tleTogJ3JlcG9ydE51bScsIGxhYmVsOlsn5oql5qGI55S16K+dJ119DQogICAgICBdLA0KICAgICAgaW5wdXQxOiAnJywNCiAgICAgIGRhdGFMaXN0OiBbXSwNCiAgICAgIG5vZGVEYXRhOiBudWxsLA0KICAgICAgdG9vbHRpcDogbnVsbCwNCiAgICAgIGFjdGl2ZUk6ICcnLA0KICAgICAgc3ZnRm9jdXM6IGZhbHNlLA0KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICB0aXRsZTogJycsDQogICAgICBkOiBudWxsDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgbm9kZURpYWxvZ0Nsb3NlKCkgew0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICB9LA0KICAgIG5vZGVEaWFsb2dPaygpIHsNCiAgICAgIHRoaXMubm9kZURpYWxvZ0Nsb3NlKCkNCiAgICB9LA0KICAgIG1vZGlmeSgpIHsNCiAgICAgIHRoaXMuZm9ybURhdGEgPSB0aGlzLm5vZGVEYXRhIHx8IHt9DQogICAgICB0aGlzLnRpdGxlID0gIuS/ruaUueiKgueCuSINCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIC8vIOeCueWHu+agh+etvuaXtueahOWkhOeQhg0KICAgIHRhZ0NsaWNrKGl0KSB7DQogICAgICB0aGlzLnN2Z0ZvY3VzID0gdHJ1ZQ0KICAgICAgdGhpcy5zZWxlY3RSb3coJ251bGwnKQ0KICAgICAgdGhpcy5yZW1vdmVUYWdIaWdobGlnaHQoKQ0KICAgICAgbGV0IGFycjIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpIitpdFswXS5pZCkNCiAgICAgIGZvciAobGV0IGkgPSBhcnIyLmxlbmd0aCAtIDE7IGkgPiAtMTsgaS0tKSB7DQogICAgICAgIGFycjJbaV0uY2xhc3NMaXN0LmFkZCgndGFnSGlnaGxpZ2h0JykNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOa4heepuumrmOS6rueahOWdlw0KICAgIHJlbW92ZVRhZ0hpZ2hsaWdodCgpIHsNCiAgICAgIGxldCBhcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0YWdIaWdobGlnaHQnKQ0KICAgICAgZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID4gLTE7IGktLSkgew0KICAgICAgICBhcnJbaV0uY2xhc3NMaXN0LnJlbW92ZSgndGFnSGlnaGxpZ2h0JykNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOaMiW5hbWXmkJzntKINCiAgICBzZWFyY2goKSB7DQogICAgICBpZighdGhpcy5kKXJldHVybg0KICAgICAgaWYoIXRoaXMuaW5wdXQxKSB7DQogICAgICAgIHRoaXMuZGF0YUxpc3QgPSBbXQ0KICAgICAgICB0aGlzLnNlbGVjdFJvdygnbnVsbCcpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgdGhpcy5kYXRhTGlzdCA9IHRoaXMuZC5zZWFyY2godGhpcy5pbnB1dDEsIFsnbmFtZSddKSAvLyDmn6Xor6JuYW1l55u45ZCM55qE5pWw5o2uDQogICAgICB0aGlzLnNlbGVjdFJvdyh0aGlzLmRhdGFMaXN0Lmxlbmd0aCA/IDAgOiAnbnVsbCcpDQogICAgfSwNCiAgICAvLyDpgInkuK3kuIDooYwNCiAgICBzZWxlY3RSb3coaSkgew0KICAgICAgbGV0IGQgPSB0aGlzLmQNCiAgICAgIGxldCBkYXRhTGlzdCA9IHRoaXMuZGF0YUxpc3QNCiAgICAgIHRoaXMuYWN0aXZlSSA9IG51bGwNCiAgICAgIGQuaGlnaGxpZ2h0T2JqZWN0KCkNCiAgICAgIGlmIChkYXRhTGlzdCAmJiBkYXRhTGlzdFtpXSkgew0KICAgICAgICBkLmhpZ2hsaWdodE9iamVjdChkYXRhTGlzdFtpXSkNCiAgICAgICAgZC5ub2RlRGF0YSA9IGRhdGFMaXN0W2ldDQogICAgICAgIHRoaXMuZHJhd1Rvb2x0aXAoZC5ub2RlRGF0YSwgJ3NlbGVjdFJvdycpDQogICAgICAgIHRoaXMuYWN0aXZlSSA9IGkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOabtOaWsFRvb2x0aXDkv6Hmga8NCiAgICBkcmF3VG9vbHRpcChkYXRhKSB7DQogICAgICB0aGlzLm5vZGVEYXRhID0gZGF0YQ0KICAgICAgaWYgKGRhdGEgJiYgZGF0YS5wcm9wZXJ0aWVzICYmIE9iamVjdC5rZXlzKGRhdGEucHJvcGVydGllcykubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLnRvb2x0aXAgPSBkYXRhLnByb3BlcnRpZXMNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMudG9vbHRpcCA9IG51bGwNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOeCueWHu3N2Z+aXtueahOWkhOeQhg0KICAgIHN2Z0NsaWNrKGRhdGEpIHsNCiAgICAgIHRoaXMuZC5oaWdobGlnaHRPYmplY3QoKQ0KICAgICAgdGhpcy5kcmF3VG9vbHRpcChkYXRhKQ0KICAgICAgdGhpcy5zdmdGb2N1cyA9IGZhbHNlDQogICAgICB0aGlzLnNlbGVjdFJvdygibnVsbCIpDQogICAgfSwNCiAgICAvLyDliJ3lp4vljJZEMw0KICAgIHN0YXJ0RDMobm9kZXMsIGxpbmtzICkgeyAvLyB0YWdzDQogICAgICB0aGlzLmQgPSBEcmF3Rm9yY2UuaW5pdCgnc3ZnJywgew0KICAgICAgICB3aWR0aDogd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGgsDQogICAgICAgIGhlaWdodDogd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0LA0KICAgICAgICBub2RlcywgbGlua3MsDQogICAgICAgIHN2Z0NsaWNrOiB0aGlzLnN2Z0NsaWNrDQogICAgICB9KQ0KICAgIH0sDQogICAgcmVzZXQoKSB7DQogICAgICB0aGlzLmRhdGFMaXN0ID0gW10NCiAgICAgIHRoaXMudG9vbHRpcCA9IG51bGwNCiAgICAgIHRoaXMuJHJlZnMuc3ZnRGl2LmlubmVySFRNTCA9ICcnDQogICAgfSwNCiAgICB3aW5kb3dSZXNpemUoKSB7DQogICAgICBpZih0aW1lciljbGVhclRpbWVvdXQodGltZXIpOw0KICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgdGhpcy5yZXNldCgpDQogICAgICAgIHRpbWVyPXVuZGVmaW5lZA0KICAgICAgICB0aGlzLnN0YXJ0RDModGhpcy5ub2RlcywgdGhpcy5saW5rcywgdGhpcy50YWdzKQ0KICAgICAgfSwgMzAwKQ0KICAgIH0sDQogICAgaW5pdERhdGEoKSB7DQogICAgICAgbGV0IHZtID0gdGhpcw0KICAgICAgYXhpb3MuZ2V0KCcvdmlzaW9uQWxsRGF0YScgKyBsb2NhdGlvbi5zZWFyY2gpDQogICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzICE9IDIwMCB8fCByZXNwb25zZS5kYXRhLmVycm9yKSB7DQogICAgICAgICAgYWxlcnQocmVzcG9uc2UuZGF0YS5lcnJvciB8fCByZXNwb25zZS5zdGF0dXNUZXh0KQ0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICAgIGxldCBqc29uID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgICB2bS5zZXREYXRhKGpzb24pDQogICAgICB9KQ0KICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikNCiAgICAgIH0pOw0KICAgIH0sDQogICAgc2V0RGF0YShkYXRhKXsNCiAgICAgIGxldCB2bSA9IHRoaXMNCiAgICAgIGxldCBub2RlcyA9IGRhdGEubm9kZXMgfHwgW10NCiAgICAgIGxldCBsaW5rcyA9IGRhdGEuZWRnZXMgfHwgW10NCiAgICAgIGxldCB0YWdzID0ge30NCiAgICAgIG5vZGVzLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgaWYgKGVsZW1lbnQudHlwZSkgew0KICAgICAgICAgIHRhZ3NbZWxlbWVudC50eXBlXSA9IHRhZ3NbZWxlbWVudC50eXBlXSB8fCBbXQ0KICAgICAgICAgIHRhZ3NbZWxlbWVudC50eXBlXS5wdXNoKGVsZW1lbnQpDQogICAgICAgICAgZWxlbWVudC50eXBlS2V5ID0gdGFnc1tlbGVtZW50LnR5cGVdWzBdLmlkIC8vIOWPluesrOS4gOS4qmlk5b2T55u45ZCM55qEa2V5DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgdm0ubm9kZXMgPSBub2Rlcw0KICAgICAgdm0ubGlua3MgPSBsaW5rcw0KICAgICAgdm0udGFncyA9IHRhZ3MNCiAgICAgIHZtLnN0YXJ0RDMobm9kZXMsIGxpbmtzLCB0YWdzKQ0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0RGF0YSgpDQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMud2luZG93UmVzaXplKQ0KICB9LA0KICBkZXN0cm95ZWQoKSB7DQogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMud2luZG93UmVzaXplKQ0KICB9DQp9Ow0K"},{"version":3,"sources":["IndexPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"IndexPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <div class=\"tags\">\r\n      <div style=\"display: flex;align-items: center;\">\r\n        <el-tag v-for=\"(it, i) in tags\" :key=\"i\"\r\n          type=\"info\" size=\"mini\" effect=\"dark\" style=\"margin-left:10px;cursor:pointer\"\r\n          @click=\"tagClick(it)\"\r\n          :color=\"it[0].style.fill\" >{{i}}({{it.length}})</el-tag>\r\n      </div>\r\n    </div>\r\n    <div class=\"left-content\">\r\n      <div style=\"height: 100%;\">\r\n        <el-scrollbar style=\"height:100%\" wrap-style=\"overflow-x: hidden;\" view-style=\"overflow-x: hidden;\">\r\n          <div class=\"header\">知识图谱</div>\r\n          <div class=\"pdtop15\">\r\n            <el-input size=\"mini\" placeholder=\"搜索\" clearable v-model=\"input1\" @keyup.native.enter=\"search\">\r\n              <el-button slot=\"append\" type=\"primary\" size=\"mini\" @click=\"search\">搜索</el-button>\r\n            </el-input>\r\n          </div>\r\n          <div class=\"pdtop15\" v-show=\"dataList && dataList.length > 0\">\r\n            <div class=\"title1\">查询结果：</div>\r\n            <div style=\"height: 180px;\">\r\n                <el-scrollbar style=\"height:100%\" wrap-style=\"overflow-x: hidden;\" view-style=\"overflow-x: hidden;\">\r\n                  <div v-for=\"(it, i) in dataList\" :key=\"i\"\r\n                    :class=\"'data-list-row' + (activeI == i ? ' active' : '')\"\r\n                    @click=\"selectRow(i)\"\r\n                    >name: {{it.name}}</div>\r\n                </el-scrollbar>\r\n            </div>\r\n          </div>\r\n          <div class=\"pdtop15\" v-show=\"tooltip\">\r\n            <div class=\"title1\">properties：</div>\r\n            <div v-for=\"(it, i) in (tooltip || {})\" :key=\"i\" style=\"padding-left: 8px;\">{{i}}：{{it}}</div>\r\n            <div class=\"pdtop15\">\r\n              <el-button size=\"mini\" @click=\"modify\">修改节点</el-button>\r\n            </div>\r\n          </div>\r\n        </el-scrollbar>\r\n      </div>\r\n    </div>\r\n    <div ref=\"svgDiv\" id=\"svg\" :class=\"(svgFocus ? 'cfocus' : '')\"></div>\r\n    \r\n    <NodeDialog\r\n      v-if=\"dialogVisible\"\r\n      :title=\"title\"\r\n      :formData=\"formData\"\r\n      :propertiesList=\"propertiesList\"\r\n      :disabled=\"false\"\r\n      @close=\"nodeDialogClose\" @ok=\"nodeDialogOk\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DrawForce from \"@/plugins/drawForce\"\r\nimport axios from 'axios'\r\nimport NodeDialog from './NodeDialog'\r\n\r\nlet timer\r\nexport default {\r\n  name: \"IndexPage\",\r\n  components: {NodeDialog},\r\n  inject: ['reload'],\r\n  data() {\r\n    return {\r\n      nodes: [],\r\n      links: [],\r\n      tags: {},\r\n      propertiesList: [\r\n        {key: 'name', label:['name']},\r\n        {key: 'identNum', label:['身份证']},\r\n        {key: 'policyNum', label:['保单', '保单号']},\r\n        {key: 'stard', label:['起期', '保险起期']},\r\n        {key: 'endd', label:['止期', '保险止期']},\r\n        {key: 'accd', label:['出险', '出险时间']},\r\n        {key: 'payNum', label:['银行卡']},\r\n        {key: 'reportD', label:['报案', '报案时间']},\r\n        {key: 'reportNum', label:['报案电话']}\r\n      ],\r\n      input1: '',\r\n      dataList: [],\r\n      nodeData: null,\r\n      tooltip: null,\r\n      activeI: '',\r\n      svgFocus: false,\r\n      dialogVisible: false,\r\n      title: '',\r\n      d: null\r\n    }\r\n  },\r\n  methods: {\r\n    nodeDialogClose() {\r\n      this.dialogVisible = false\r\n    },\r\n    nodeDialogOk() {\r\n      this.nodeDialogClose()\r\n    },\r\n    modify() {\r\n      this.formData = this.nodeData || {}\r\n      this.title = \"修改节点\"\r\n      this.dialogVisible = true\r\n    },\r\n    // 点击标签时的处理\r\n    tagClick(it) {\r\n      this.svgFocus = true\r\n      this.selectRow('null')\r\n      this.removeTagHighlight()\r\n      let arr2 = document.getElementsByClassName(\"i\"+it[0].id)\r\n      for (let i = arr2.length - 1; i > -1; i--) {\r\n        arr2[i].classList.add('tagHighlight')\r\n      }\r\n    },\r\n    // 清空高亮的块\r\n    removeTagHighlight() {\r\n      let arr = document.getElementsByClassName('tagHighlight')\r\n      for (let i = arr.length - 1; i > -1; i--) {\r\n        arr[i].classList.remove('tagHighlight')\r\n      }\r\n    },\r\n    // 按name搜索\r\n    search() {\r\n      if(!this.d)return\r\n      if(!this.input1) {\r\n        this.dataList = []\r\n        this.selectRow('null')\r\n        return\r\n      }\r\n      this.dataList = this.d.search(this.input1, ['name']) // 查询name相同的数据\r\n      this.selectRow(this.dataList.length ? 0 : 'null')\r\n    },\r\n    // 选中一行\r\n    selectRow(i) {\r\n      let d = this.d\r\n      let dataList = this.dataList\r\n      this.activeI = null\r\n      d.highlightObject()\r\n      if (dataList && dataList[i]) {\r\n        d.highlightObject(dataList[i])\r\n        d.nodeData = dataList[i]\r\n        this.drawTooltip(d.nodeData, 'selectRow')\r\n        this.activeI = i\r\n      }\r\n    },\r\n    // 更新Tooltip信息\r\n    drawTooltip(data) {\r\n      this.nodeData = data\r\n      if (data && data.properties && Object.keys(data.properties).length > 0) {\r\n        this.tooltip = data.properties\r\n      } else {\r\n        this.tooltip = null\r\n      }\r\n    },\r\n    // 点击svg时的处理\r\n    svgClick(data) {\r\n      this.d.highlightObject()\r\n      this.drawTooltip(data)\r\n      this.svgFocus = false\r\n      this.selectRow(\"null\")\r\n    },\r\n    // 初始化D3\r\n    startD3(nodes, links ) { // tags\r\n      this.d = DrawForce.init('svg', {\r\n        width: window.document.body.offsetWidth,\r\n        height: window.document.body.offsetHeight,\r\n        nodes, links,\r\n        svgClick: this.svgClick\r\n      })\r\n    },\r\n    reset() {\r\n      this.dataList = []\r\n      this.tooltip = null\r\n      this.$refs.svgDiv.innerHTML = ''\r\n    },\r\n    windowResize() {\r\n      if(timer)clearTimeout(timer);\r\n      timer = setTimeout(() => {\r\n        this.reset()\r\n        timer=undefined\r\n        this.startD3(this.nodes, this.links, this.tags)\r\n      }, 300)\r\n    },\r\n    initData() {\r\n       let vm = this\r\n      axios.get('/visionAllData' + location.search)\r\n      .then(function (response) {\r\n        if(response.status != 200 || response.data.error) {\r\n          alert(response.data.error || response.statusText)\r\n          return\r\n        }\r\n        let json = response.data\r\n        vm.setData(json)\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error)\r\n      });\r\n    },\r\n    setData(data){\r\n      let vm = this\r\n      let nodes = data.nodes || []\r\n      let links = data.edges || []\r\n      let tags = {}\r\n      nodes.forEach((element) => {\r\n        if (element.type) {\r\n          tags[element.type] = tags[element.type] || []\r\n          tags[element.type].push(element)\r\n          element.typeKey = tags[element.type][0].id // 取第一个id当相同的key\r\n        }\r\n      });\r\n      vm.nodes = nodes\r\n      vm.links = links\r\n      vm.tags = tags\r\n      vm.startD3(nodes, links, tags)\r\n    },\r\n  },\r\n  mounted() {\r\n    this.initData()\r\n    window.addEventListener('resize', this.windowResize)\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener('resize', this.windowResize)\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.content {\r\n  height: 100%;\r\n  width: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n  overflow-y: hidden;\r\n  background-color: #2e2d2d;\r\n  color: #fff;\r\n}\r\n.pdtop15 {\r\n  padding-top: 15px;\r\n}\r\n.title1 {\r\n  font-size: 18px;\r\n  color: #b7b3b3;\r\n  border-top: 1px solid #777;\r\n  padding-bottom: 8px;\r\n}\r\n#svg {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n.left-content {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 300px;\r\n  padding: 10px;\r\n  border-right: 1px solid #555;\r\n  background-color: #ffffff0f;\r\n}\r\n.header {\r\n  font-size: 30px;\r\n  font-weight: bolder;\r\n}\r\n.data-list-row {\r\n  padding: 4px 8px;\r\n  cursor: pointer;\r\n  word-break: break-all;\r\n}\r\n.data-list-row.active {\r\n  background-color: #5d5d5d;\r\n  border-radius: 4px;\r\n}\r\n.tags {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 320px;\r\n  right: 0;\r\n  padding: 10px;\r\n  min-height: 20px;\r\n  border-bottom: 1px solid #555;\r\n  background-color: #ffffff0f;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n</style>\r\n"]}]}