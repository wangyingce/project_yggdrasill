{"remainingRequest":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/babel-loader/lib/index.js!/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/eslint-loader/index.js??ref--13-0!/Users/eruda/Documents/GitHub/project_yggdrasill/ui/src/plugins/drawForce.js","dependencies":[{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/src/plugins/drawForce.js","mtime":1620638042000},{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9lcnVkYS9Eb2N1bWVudHMvR2l0SHViL3Byb2plY3RfeWdnZHJhc2lsbC91aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Cgp2YXIgZDMgPSByZXF1aXJlKCdkMycpOwovKioKICog5YWz57O75Yqb5a+85ZCR5Zu+IC0gZDMuanPliLbkvZwgICDvvIhwYyx3YXDpgJrnlKjvvIkKICogQHBhcmFtIGlkICAgIHtzdHJpbmd9IOeItuWuueWZqGlkCiAqIEBwYXJhbSBjb25maWdQYXIgICAgICB7SlNPTuWvueixoX0gICAg6YWN572uCiAqLwoKCmV4cG9ydCBkZWZhdWx0IHsKICBjb25maWc6IHsKICAgIHdpZHRoOiAzMDAsCiAgICAvLyDmgLvnlLvluINzdmfnmoTlrr0KICAgIGhlaWdodDogMzAwLAogICAgbm9kZXM6IFtdLAogICAgbGlua3M6IFtdLAogICAgaXNTY2FsZTogdHJ1ZSwKICAgIC8v5piv5ZCm5ZCv55So57yp5pS+5bmz56e7em9vbeWKn+iDvQogICAgc2NhbGVFeHRlbnQ6IFswLjEsIDRdLAogICAgLy/nvKnmlL7nmoTmr5TkvovlsLoKICAgIGNoYXJnZVN0cmVuZ3RoOiA0MDAsCiAgICAvL+S4h+acieW8leWKmwogICAgY29sbGlkZTogNzAsCiAgICAvL+eisOaSnuWKm+eahOWkp+WwjyDvvIjoioLngrnkuYvpl7TnmoTpl7Tot53vvIkKICAgIHI6IDMwLAogICAgLy8g5aS05YOP55qE5Y2K5b6EIFszMCAtIDQ1XQogICAgbGlua0NvbG9yOiAnI2JhZDRlZCcsCiAgICAvL+mTvuaOpee6v+m7mOiupOeahOminOiJsgogICAgbWFya2VyQ29sb3I6ICJzdGVlbGJsdWUiLAogICAgcmVjdEZpbGw6ICJibHVlIiwKICAgIHRleHRGaWxsOiAiI2MyYzJjMiIsCiAgICBzdHJva2VXaWR0aDogMiwKICAgIC8vIOWktOWDj+WkluWbtOWMheijueeahOWuveW6pgogICAgc3ZnQ2xpY2s6IG51bGwKICB9LAogIG5vZGVEYXRhOiBudWxsLAogIGlkOiBudWxsLAogIHNpbXVsYXRpb246IG51bGwsCiAgU1ZHOiBudWxsLAogIGRlZnM6IG51bGwsCiAgbWFya2VyOiBudWxsLAogIHJlbE1hcF9nOiBudWxsLAogIGxpbmtzOiBudWxsLAogIGVkZ2VzOiBudWxsLAogIGNpcmNsZXM6IG51bGwsCiAgdGV4dHM6IG51bGwsCiAgbWFya2VyV2lkdGg6IDEwLAogIGluaXQ6IGZ1bmN0aW9uIGluaXQoaWQsIGNvbmZpZ1BhcikgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmlkID0gaWQ7CiAgICB0aGlzLm5vZGVEYXRhID0gbnVsbDsKICAgIHRoaXMuY29uZmlnID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmNvbmZpZyksIGNvbmZpZ1Bhcik7CgogICAgdmFyIF90aGF0ID0gdGhpczsgLy8gdmFyIHRpbWVvdXQ7Ly/lrprml7blmagKICAgIC8vIDEuIOWIm+W7uuS4gOS4quWKm+WtpuaooeaLn+WZqAoKCiAgICB0aGlzLnNpbXVsYXRpb24gPSBkMy5mb3JjZVNpbXVsYXRpb24odGhpcy5jb25maWcubm9kZXMpLmZvcmNlKCJsaW5rIiwgZDMuZm9yY2VMaW5rKHRoaXMuY29uZmlnLmxpbmtzKS5pZChmdW5jdGlvbiAoZCkgewogICAgICByZXR1cm4gZC5pZDsKICAgIH0pKS5mb3JjZSgiY2VudGVyIiwgZDMuZm9yY2VDZW50ZXIodGhpcy5jb25maWcud2lkdGggLyAyICsgMTUwLCB0aGlzLmNvbmZpZy5oZWlnaHQgLyAyKSkuZm9yY2UoImNoYXJnZSIsIGQzLmZvcmNlTWFueUJvZHkoKS5zdHJlbmd0aCh0aGlzLmNvbmZpZy5jaGFyZ2VTdHJlbmd0aCkuZGlzdGFuY2VNYXgoMTAwKSkuZm9yY2UoImNvbGxpZGUiLCBkMy5mb3JjZUNvbGxpZGUodGhpcy5jb25maWcuY29sbGlkZSkuc3RyZW5ndGgoMC4yKS5pdGVyYXRpb25zKDUpKS5hbHBoYURlY2F5KDAuMik7IC8vIDIu5Yib5bu6c3Zn5qCH562+CgogICAgdGhpcy5TVkcgPSBkMy5zZWxlY3QoIiMiICsgaWQpLmFwcGVuZCgic3ZnIikuYXR0cigid2lkdGgiLCB0aGlzLmNvbmZpZy53aWR0aCkuYXR0cigiaGVpZ2h0IiwgdGhpcy5jb25maWcuaGVpZ2h0KS5jYWxsKGQzLnpvb20oKS5zY2FsZUV4dGVudCh0aGlzLmNvbmZpZy5zY2FsZUV4dGVudCkub24oInpvb20iLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgaWYgKF90aGlzLmNvbmZpZy5pc1NjYWxlKSB7CiAgICAgICAgX3RoYXQucmVsTWFwX2cuYXR0cigidHJhbnNmb3JtIiwgZXZlbnQudHJhbnNmb3JtKTsKICAgICAgfQogICAgfSkpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lICE9ICdjaXJjbGUnICYmIGUudGFyZ2V0LnRhZ05hbWUgIT0gJ0NJUkNMRScpIHsKICAgICAgICBfdGhpcy5ub2RlRGF0YSA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmIChfdGhpcy5jb25maWcuc3ZnQ2xpY2spIHsKICAgICAgICBfdGhpcy5jb25maWcuc3ZnQ2xpY2soX3RoaXMubm9kZURhdGEpOwogICAgICB9CiAgICB9KS5vbigiZGJsY2xpY2suem9vbSIsIG51bGwpOwogICAgdGhpcy5kZWZzID0gdGhpcy5TVkcuYXBwZW5kKCdkZWZzJyk7IC8vIOa3u+WKoOeureWktAoKICAgIHRoaXMubWFya2VyID0gdGhpcy5kZWZzLmFwcGVuZCgibWFya2VyIikuYXR0cignaWQnLCAibWFya2VyIikuYXR0cigibWFya2VyV2lkdGgiLCB0aGlzLm1hcmtlcldpZHRoKSAvL21hcmtlcuinhueql+eahOWuvQogICAgLmF0dHIoIm1hcmtlckhlaWdodCIsIHRoaXMubWFya2VyV2lkdGgpIC8vbWFya2Vy6KeG56qX55qE6auYCiAgICAuYXR0cigicmVmWCIsIHRoaXMuY29uZmlnLnIgKyA2ICsgdGhpcy5jb25maWcuc3Ryb2tlV2lkdGgpIC8vcmVmWOWSjHJlZlnvvIzmjIfnmoTmmK/lm77lvaLlhYPntKDlkoxtYXJrZXLov57mjqXnmoTkvY3nva7lnZDmoIcKICAgIC5hdHRyKCJyZWZZIiwgNCkuYXR0cigib3JpZW50IiwgImF1dG8iKSAvL29yaWVudD0iYXV0byLorr7nva7nrq3lpLTnmoTmlrnlkJHkuLroh6rliqjpgILlupTnur/mnaHnmoTmlrnlkJEKICAgIC5hdHRyKCJtYXJrZXJVbml0cyIsICJ1c2VyU3BhY2VPblVzZSIpIC8vbWFya2Vy5piv5ZCm6L+b6KGM57yp5pS+ICzpu5jorqTlgLzmmK9zdHJva2VXaWR0aCzkvJrnvKnmlL4KICAgIC5hcHBlbmQoInBhdGgiKS5hdHRyKCJkIiwgIk0gMCAwIDggNCAwIDhaIikuYXR0cigiZmlsbCIsIHRoaXMuY29uZmlnLm1hcmtlckNvbG9yKTsKICAgIHRoaXMuc2V0UGF0dGVybnMoKTsgLy8g5pS+5YWz57O75Zu+55qE5a655ZmoCgogICAgdGhpcy5yZWxNYXBfZyA9IHRoaXMuU1ZHLmFwcGVuZCgiZyIpLmF0dHIoImNsYXNzIiwgInJlbE1hcF9nIikuYXR0cigid2lkdGgiLCB0aGlzLmNvbmZpZy53aWR0aCkuYXR0cigiaGVpZ2h0IiwgdGhpcy5jb25maWcuaGVpZ2h0KTsKICAgIHRoaXMuZ2VkZ2VzID0gdGhpcy5yZWxNYXBfZy5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICdlZGdlcycpOwogICAgdGhpcy5zZXRFZGdlcygpOwogICAgdGhpcy5zZXRDaXJjbGVzKCk7CiAgICB0aGlzLnNpbXVsYXRpb25UaWNrKCk7CiAgICByZXR1cm4gdGhpczsKICB9LAogIC8vIOa3u+WKoOWkmuS4quWktOWDj+WbvueJh+eahCA8cGF0dGVybj4KICBzZXRQYXR0ZXJuczogZnVuY3Rpb24gc2V0UGF0dGVybnMoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB0aGlzLmRlZnMuc2VsZWN0QWxsKCJwYXR0ZXJuLnBhdHRlcm5jbGFzcyIpLnJlbW92ZSgpOwogICAgdmFyIHMgPSB0aGlzLmRlZnMuc2VsZWN0QWxsKCJwYXR0ZXJuLnBhdHRlcm5jbGFzcyIpLmRhdGEodGhpcy5jb25maWcubm9kZXMpOyAvLyBzLmV4aXQoKS5yZW1vdmUoKQoKICAgIHZhciBwYXR0ZXJucyA9IHMuZW50ZXIoKS5hcHBlbmQoInBhdHRlcm4iKS5hdHRyKCJjbGFzcyIsICJwYXR0ZXJuY2xhc3MiKS5hdHRyKCJpZCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgIHJldHVybiAnYXZhdGFyJyArIF90aGlzMi5pZCArIGQuaWQ7CiAgICB9KS5hdHRyKCJ3aWR0aCIsICIxIikuYXR0cigiaGVpZ2h0IiwgIjEiKTsgLy8g5aeT5ZCN55qE6IOM5pmvCgogICAgcGF0dGVybnMuYXBwZW5kKCJyZWN0IikuYXR0cigieCIsICIwIikuYXR0cigieSIsIDApLmF0dHIoIndpZHRoIiwgMiAqIHRoaXMuY29uZmlnLnIpLmF0dHIoImhlaWdodCIsIDIgKiB0aGlzLmNvbmZpZy5yKS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgcmV0dXJuIGQuc3R5bGUuZmlsbCB8fCBfdGhpczIuY29uZmlnLnJlY3RGaWxsOwogICAgfSk7IC8vIOWnk+WQjQoKICAgIHBhdHRlcm5zLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCB0aGlzLmNvbmZpZy5yKS5hdHRyKCJ5IiwgMS4xNCAqIHRoaXMuY29uZmlnLnIpLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpLmF0dHIoImZpbGwiLCAiI2ZmZiIpLnN0eWxlKCJmb250LXNpemUiLCB0aGlzLmNvbmZpZy5yIC8gMykudGV4dChmdW5jdGlvbiAoZCkgewogICAgICByZXR1cm4gZC5uYW1lOwogICAgfSk7CiAgfSwKICBzZXRFZGdlczogZnVuY3Rpb24gc2V0RWRnZXMoKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICB2YXIgX3RoYXQgPSB0aGlzOwoKICAgIHRoaXMuZ2VkZ2VzLnNlbGVjdEFsbCgiZy5lZGdlIikucmVtb3ZlKCk7CiAgICB2YXIgcyA9IHRoaXMuZ2VkZ2VzLnNlbGVjdEFsbCgiZy5lZGdlIikuZGF0YSh0aGlzLmNvbmZpZy5saW5rcyk7IC8vIHMuZXhpdCgpLnJlbW92ZSgpCgogICAgdmFyIGVkZ2VzID0gcy5lbnRlcigpLmFwcGVuZCgiZyIpLmF0dHIoImNsYXNzIiwgImVkZ2UiKTsgLy8gNS4yIOa3u+WKoOe6vwoKICAgIGVkZ2VzLmFwcGVuZCgicGF0aCIpLmF0dHIoImNsYXNzIiwgImxpbmtzIikuYXR0cigiaWQiLCBmdW5jdGlvbiAoZCkgewogICAgICByZXR1cm4gJ3BhdGgnICsgX3RoYXQuaWQgKyBkLmlkOwogICAgfSkgLy8gdGhpcy5jb25maWcuciArIHRoaXMubWFya2VyV2lkdGgg5ZyG5Y2K5b6E5Yqg566t5aS05a695bqmCiAgICAuYXR0cigiZCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgIHJldHVybiAiTSIgKyAoX3RoYXQuY29uZmlnLnIgKyBfdGhhdC5tYXJrZXJXaWR0aCkgKyAiLCIgKyAwICsgIiBMIiArIGdldERpcyhkLnNvdXJjZSwgZC50YXJnZXQpICsgIiwwIjsKICAgIH0pLnN0eWxlKCJtYXJrZXItZW5kIiwgInVybCgjbWFya2VyKSIpLmF0dHIoJ3N0cm9rZScsIGZ1bmN0aW9uIChkKSB7CiAgICAgIHZhciBzdHIgPSBkLmNvbG9yID8gZC5jb2xvciA6IF90aGF0LmNvbmZpZy5saW5rQ29sb3I7CiAgICAgIHJldHVybiBzdHI7CiAgICB9KTsgLy8g5paH5pys5qCH562+ICDlnZDmoIfvvIh4LHnvvInku6Pooagg5paH5pys55qE5bem5LiL6KeS55qE54K5CgogICAgZWRnZXMuYXBwZW5kKCJ0ZXh0IikuYXR0cigiY2xhc3MiLCAidGV4dHMiKS5hdHRyKCd5JywgLTIpLmF0dHIoJ2ZpbGwnLCB0aGlzLmNvbmZpZy50ZXh0RmlsbCkuYXR0cigidGV4dC1hbmNob3IiLCAiZW5kIikuc3R5bGUoImN1cnNvciIsICJwb2ludGVyIikuc3R5bGUoImZvbnQtc2l6ZSIsIDgpLnRleHQoZnVuY3Rpb24gKGQpIHsKICAgICAgcmV0dXJuIGQudHlwZTsKICAgIH0pLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCdmaWxsJywgJyNmZmZmZmYnKS5zdHlsZSgiZm9udC1zaXplIiwgMTApOwogICAgfSkub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKCkgewogICAgICBkMy5zZWxlY3QodGhpcykuYXR0cignZmlsbCcsIF90aGF0LmNvbmZpZy50ZXh0RmlsbCkuc3R5bGUoImZvbnQtc2l6ZSIsIDgpOwogICAgfSkub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICBfdGhpczMuY29uZmlnLnRleHRDbGljayAmJiBfdGhpczMuY29uZmlnLnRleHRDbGljaygpOwogICAgfSk7IC8vIC5hcHBlbmQoJ3RleHRQYXRoJykuYXR0cigneXhsaW5rOmhyZWYnLCBmdW5jdGlvbihkKSB7CiAgICAvLyAgIHJldHVybiAoInVybCgjcGF0aCIgKyBfdGhhdC5pZCArIGQuaWQgKyAiKSIpCiAgICAvLyB9KQoKICAgIHRoaXMuZWRnZXMgPSB0aGlzLmdlZGdlcy5zZWxlY3RBbGwoImcuZWRnZSIpOwogICAgdGhpcy5saW5rcyA9IHRoaXMuZ2VkZ2VzLnNlbGVjdEFsbCgicGF0aC5saW5rcyIpOwogICAgdGhpcy50ZXh0cyA9IHRoaXMuZ2VkZ2VzLnNlbGVjdEFsbCgidGV4dC50ZXh0cyIpOwogIH0sCiAgLy8g5YWz57O75Zu+5re75Yqg55So5LqO5pi+56S65aS05YOP55qE6IqC54K5CiAgc2V0Q2lyY2xlczogZnVuY3Rpb24gc2V0Q2lyY2xlcygpIHsKICAgIHZhciBfdGhhdCA9IHRoaXM7CgogICAgdGhpcy5yZWxNYXBfZy5zZWxlY3RBbGwoImNpcmNsZS5jaXJjbGVjbGFzcyIpLnJlbW92ZSgpOwogICAgdmFyIHMgPSB0aGlzLnJlbE1hcF9nLnNlbGVjdEFsbCgiY2lyY2xlLmNpcmNsZWNsYXNzIikuZGF0YSh0aGlzLmNvbmZpZy5ub2Rlcyk7IC8vIHMuZXhpdCgpLnJlbW92ZSgpCgogICAgcy5lbnRlcigpLmFwcGVuZCgiY2lyY2xlIikuYXR0cigiY2xhc3MiLCBmdW5jdGlvbiAoZCkgewogICAgICByZXR1cm4gImNpcmNsZWNsYXNzIGkiICsgZC50eXBlS2V5OwogICAgfSkuc3R5bGUoImN1cnNvciIsICJwb2ludGVyIikuYXR0cigiZmlsbCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgIHJldHVybiAidXJsKCNhdmF0YXIiICsgX3RoYXQuaWQgKyBkLmlkICsgIikiOwogICAgfSkuYXR0cigic3Ryb2tlIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgcmV0dXJuIGQuc3R5bGUuc3Ryb2tlIHx8ICIjY2NmMWZjIjsKICAgIH0pLmF0dHIoInN0cm9rZS13aWR0aCIsIHRoaXMuY29uZmlnLnN0cm9rZVdpZHRoKS5hdHRyKCJyIiwgdGhpcy5jb25maWcucikub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoJ3N0cm9rZS13aWR0aCcsICc0Jyk7CiAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCdzdHJva2UnLCAnI2EzZTVmOScpOwogICAgfSkub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKCkgewogICAgICBkMy5zZWxlY3QodGhpcykuYXR0cignc3Ryb2tlLXdpZHRoJywgX3RoYXQuY29uZmlnLnN0cm9rZVdpZHRoKTsKICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoJ3N0cm9rZScsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuc3R5bGUuc3Ryb2tlIHx8ICIjY2NmMWZjIjsKICAgICAgfSk7CiAgICB9KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQsIGQpIHsKICAgICAgX3RoYXQubm9kZURhdGEgPSBkOwogICAgfSkub24oImRibGNsaWNrIiwgZnVuY3Rpb24gKGV2ZW50LCBkKSB7CiAgICAgIF90aGF0LmhpZ2hsaWdodE9iamVjdChkKTsKICAgIH0pLmNhbGwoZHJhZyh0aGlzLnNpbXVsYXRpb24pKTsKICAgIHRoaXMuY2lyY2xlcyA9IHRoaXMucmVsTWFwX2cuc2VsZWN0QWxsKCJjaXJjbGUuY2lyY2xlY2xhc3MiKTsKICB9LAogIHNpbXVsYXRpb25UaWNrOiBmdW5jdGlvbiBzaW11bGF0aW9uVGljaygpIHsKICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgIHZhciBvZmZzZXQgPSB0aGlzLmNvbmZpZy5yICsgdGhpcy5tYXJrZXJXaWR0aDsKICAgIHRoaXMuc2ltdWxhdGlvbi5vbigidGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgLy8g5L+u5pS55q+P5p2h5a655ZmoZWRnZeeahOS9jee9rgogICAgICBfdGhpczQuZWRnZXMuYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZ2V0VHJhbnNmb3JtKGQuc291cmNlLCBkLnRhcmdldCwgZ2V0RGlzKGQuc291cmNlLCBkLnRhcmdldCkpOwogICAgICB9KTsgLy8g5L+u5pS55q+P5p2h57q/bGlua+S9jee9rgoKCiAgICAgIF90aGlzNC5saW5rcy5hdHRyKCJkIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gIk0iICsgKF90aGlzNC5jb25maWcuciArIF90aGlzNC5tYXJrZXJXaWR0aCkgKyAiLCIgKyAwICsgIiBMIiArIGdldERpcyhkLnNvdXJjZSwgZC50YXJnZXQpICsgIiwwIjsKICAgICAgfSk7IC8vIOS/ruaUuee6v+S4reWFs+ezu+aWh+Wtl3RleHTnmoTkvY3nva4g5Y+KIOaWh+Wtl+eahOWPjeatowoKCiAgICAgIF90aGlzNC50ZXh0cy5hdHRyKCJ4IiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICBpZiAoZC50YXJnZXQueCA+IGQuc291cmNlLngpIHsKICAgICAgICAgIHJldHVybiBnZXREaXMoZC5zb3VyY2UsIGQudGFyZ2V0KSAtIG9mZnNldDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIG9mZnNldDsKICAgICAgICB9IC8vIHJldHVybiBkLnRhcmdldC54IC0gZC5zb3VyY2UueCArIDQwCgogICAgICB9KSAvLyAuYXR0cigieCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgIC8vICAgcmV0dXJuIGdldERpcyhkLnNvdXJjZSwgZC50YXJnZXQpIC8gMgogICAgICAvLyB9KQogICAgICAuYXR0cigidGV4dC1hbmNob3IiLCBmdW5jdGlvbiAoZCkgewogICAgICAgIGlmIChkLnNvdXJjZS54ID4gZC50YXJnZXQueCkgewogICAgICAgICAgcmV0dXJuICdzdGFydCc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAnZW5kJzsKICAgICAgICB9IC8vIHJldHVybiBkLnRhcmdldC54IC0gZC5zb3VyY2UueCArIDQwCgogICAgICB9KSAvLyAuYXR0cigieCIsIHRoaXMuY29uZmlnLnIgKyB0aGlzLm1hcmtlcldpZHRoKQogICAgICAuYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAvLyDmm7TmlrDmlofmnKzlj43mraMKICAgICAgICBpZiAoZC50YXJnZXQueCA8IGQuc291cmNlLngpIHsKICAgICAgICAgIHZhciB4ID0gZ2V0RGlzKGQuc291cmNlLCBkLnRhcmdldCkgLyAyOwogICAgICAgICAgcmV0dXJuICdyb3RhdGUoMTgwICcgKyB4ICsgJyAnICsgMCArICcpJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuICdyb3RhdGUoMCknOwogICAgICAgIH0KICAgICAgfSk7IC8vIOS/ruaUueiKgueCueeahOS9jee9rgoKCiAgICAgIF90aGlzNC5jaXJjbGVzLmF0dHIoImN4IiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC54OwogICAgICB9KS5hdHRyKCJjeSIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQueTsKICAgICAgfSk7CiAgICB9KTsKICB9LAoKICAvKioKICAgKiDmm7TmlrDop4blm74KICAgKi8KICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShjb25maWdQYXIpIHsKICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgIHRoaXMuY29uZmlnID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmNvbmZpZyksIGNvbmZpZ1Bhcik7CiAgICB0aGlzLnNpbXVsYXRpb24ubm9kZXModGhpcy5jb25maWcubm9kZXMpLmZvcmNlKCJsaW5rIiwgZDMuZm9yY2VMaW5rKHRoaXMuY29uZmlnLmxpbmtzKS5pZChmdW5jdGlvbiAoZCkgewogICAgICByZXR1cm4gZC5pZDsKICAgIH0pKS5hbHBoYVRhcmdldCgwLjIpLnJlc3RhcnQoKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBfdGhpczUuc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwKTsKICAgIH0sIDIwMCk7CiAgICB0aGlzLnNldFBhdHRlcm5zKCk7CiAgICB0aGlzLnNldEVkZ2VzKCk7CiAgICB0aGlzLnNldENpcmNsZXMoKTsKICB9LAogIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKHR4dCwgYXR0cnMpIHsKICAgIGlmICghdHh0KSB7CiAgICAgIHJldHVybiBbXTsKICAgIH0KCiAgICB2YXIgcmVzID0gW107CiAgICB0aGlzLmNvbmZpZy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cnMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgYXR0ciA9IGF0dHJzW2ldOwoKICAgICAgICBpZiAodlthdHRyXSAmJiB2W2F0dHJdLmluZGV4T2YodHh0KSA+IC0xKSB7CiAgICAgICAgICByZXMucHVzaCh2KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHJlczsKICB9LAogIGhpZ2hsaWdodGVkOiBudWxsLAogIGRlcGVuZHNOb2RlOiBbXSwKICBkZXBlbmRzTGlua0FuZFRleHQ6IFtdLAogIGhpZ2hsaWdodE9iamVjdDogZnVuY3Rpb24gaGlnaGxpZ2h0T2JqZWN0KG9iaikgewogICAgdmFyIF90aGF0ID0gdGhpczsKCiAgICBpZiAob2JqKSB7CiAgICAgIHZhciBvYmpJbmRleCA9IG9iai5pbmRleDsKICAgICAgX3RoYXQuZGVwZW5kc05vZGUgPSBfdGhhdC5kZXBlbmRzTm9kZS5jb25jYXQoW29iakluZGV4XSk7CiAgICAgIF90aGF0LmRlcGVuZHNMaW5rQW5kVGV4dCA9IF90aGF0LmRlcGVuZHNMaW5rQW5kVGV4dC5jb25jYXQoW29iakluZGV4XSk7CgogICAgICBfdGhhdC5jb25maWcubGlua3MuZm9yRWFjaChmdW5jdGlvbiAobGtJdGVtKSB7CiAgICAgICAgaWYgKG9iakluZGV4ID09IGxrSXRlbVsnc291cmNlJ11bJ2luZGV4J10pIHsKICAgICAgICAgIF90aGF0LmRlcGVuZHNOb2RlID0gX3RoYXQuZGVwZW5kc05vZGUuY29uY2F0KFtsa0l0ZW0udGFyZ2V0LmluZGV4XSk7CiAgICAgICAgfSBlbHNlIGlmIChvYmpJbmRleCA9PSBsa0l0ZW1bJ3RhcmdldCddWydpbmRleCddKSB7CiAgICAgICAgICBfdGhhdC5kZXBlbmRzTm9kZSA9IF90aGF0LmRlcGVuZHNOb2RlLmNvbmNhdChbbGtJdGVtLnNvdXJjZS5pbmRleF0pOwogICAgICAgIH0KICAgICAgfSk7IC8vIOmakOiXj+iKgueCuQoKCiAgICAgIF90aGF0LlNWRy5zZWxlY3RBbGwoJ2NpcmNsZScpLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBfdGhhdC5kZXBlbmRzTm9kZS5pbmRleE9mKGQuaW5kZXgpID09IC0xOwogICAgICB9KS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwLjEpOyAvLyDpmpDol4/nur8KCgogICAgICBfdGhhdC5TVkcuc2VsZWN0QWxsKCcuZWRnZScpLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIC8vIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBfdGhhdC5kZXBlbmRzTGlua0FuZFRleHQuaW5kZXhPZihkLnNvdXJjZS5pbmRleCkgPT0gLTEgJiYgX3RoYXQuZGVwZW5kc0xpbmtBbmRUZXh0LmluZGV4T2YoZC50YXJnZXQuaW5kZXgpID09IC0xOwogICAgICB9KS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwLjEpOwogICAgfSBlbHNlIHsKICAgICAgLy8g5oGi5aSN6ZqQ6JeP55qE57q/CiAgICAgIF90aGF0LlNWRy5zZWxlY3RBbGwoJ2NpcmNsZScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpOyAvLyDmgaLlpI3pmpDol4/nmoTnur8KCgogICAgICBfdGhhdC5TVkcuc2VsZWN0QWxsKCcuZWRnZScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpOwoKICAgICAgX3RoYXQuaGlnaGxpZ2h0ZWQgPSBudWxsOwogICAgICBfdGhhdC5kZXBlbmRzTm9kZSA9IFtdOwogICAgICBfdGhhdC5kZXBlbmRzTGlua0FuZFRleHQgPSBbXTsKICAgIH0KICB9Cn07CgpmdW5jdGlvbiBkcmFnKHNpbXVsYXRpb24pIHsKICBmdW5jdGlvbiBkcmFnc3RhcnRlZChldmVudCkgewogICAgaWYgKCFldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMC4xKS5yZXN0YXJ0KCk7CiAgICBldmVudC5zdWJqZWN0LmZ4ID0gZXZlbnQuc3ViamVjdC54OwogICAgZXZlbnQuc3ViamVjdC5meSA9IGV2ZW50LnN1YmplY3QueTsKICB9CgogIGZ1bmN0aW9uIGRyYWdnZWQoZXZlbnQpIHsKICAgIGV2ZW50LnN1YmplY3QuZnggPSBldmVudC54OwogICAgZXZlbnQuc3ViamVjdC5meSA9IGV2ZW50Lnk7CiAgfQoKICBmdW5jdGlvbiBkcmFnZW5kZWQoZXZlbnQpIHsKICAgIGlmICghZXZlbnQuYWN0aXZlKSBzaW11bGF0aW9uLmFscGhhVGFyZ2V0KDApOwogICAgZXZlbnQuc3ViamVjdC5meCA9IG51bGw7CiAgICBldmVudC5zdWJqZWN0LmZ5ID0gbnVsbDsKICB9CgogIHJldHVybiBkMy5kcmFnKCkub24oInN0YXJ0IiwgZHJhZ3N0YXJ0ZWQpLm9uKCJkcmFnIiwgZHJhZ2dlZCkub24oImVuZCIsIGRyYWdlbmRlZCk7Cn0gLy8g5rGC5Lik54K56Ze055qE6Led56a7CgoKZnVuY3Rpb24gZ2V0RGlzKHMsIHQpIHsKICByZXR1cm4gTWF0aC5zcXJ0KChzLnggLSB0LngpICogKHMueCAtIHQueCkgKyAocy55IC0gdC55KSAqIChzLnkgLSB0LnkpKTsKfSAvLyDmsYLlhYPntKDnp7vliqjliLDnm67moIfkvY3nva7miYDpnIDopoHnmoQgdHJhbnNmb3JtIOWxnuaAp+WAvAoKCmZ1bmN0aW9uIGdldFRyYW5zZm9ybShzb3VyY2UsIHRhcmdldCwgX2RpcykgewogIHZhciByOwoKICBpZiAodGFyZ2V0LnggPiBzb3VyY2UueCkgewogICAgaWYgKHRhcmdldC55ID4gc291cmNlLnkpIHsKICAgICAgciA9IE1hdGguYXNpbigodGFyZ2V0LnkgLSBzb3VyY2UueSkgLyBfZGlzKTsKICAgIH0gZWxzZSB7CiAgICAgIHIgPSBNYXRoLmFzaW4oKHNvdXJjZS55IC0gdGFyZ2V0LnkpIC8gX2Rpcyk7CiAgICAgIHIgPSAtcjsKICAgIH0KICB9IGVsc2UgewogICAgaWYgKHRhcmdldC55ID4gc291cmNlLnkpIHsKICAgICAgciA9IE1hdGguYXNpbigodGFyZ2V0LnkgLSBzb3VyY2UueSkgLyBfZGlzKTsKICAgICAgciA9IE1hdGguUEkgLSByOwogICAgfSBlbHNlIHsKICAgICAgciA9IE1hdGguYXNpbigoc291cmNlLnkgLSB0YXJnZXQueSkgLyBfZGlzKTsKICAgICAgciAtPSBNYXRoLlBJOwogICAgfQogIH0KCiAgciA9IHIgKiAoMTgwIC8gTWF0aC5QSSk7CiAgcmV0dXJuICJ0cmFuc2xhdGUoIiArIHNvdXJjZS54ICsgIiwiICsgc291cmNlLnkgKyAiKXJvdGF0ZSgiICsgciArICIpIjsKfQ=="},{"version":3,"sources":["/Users/eruda/Documents/GitHub/project_yggdrasill/ui/src/plugins/drawForce.js"],"names":["d3","require","config","width","height","nodes","links","isScale","scaleExtent","chargeStrength","collide","r","linkColor","markerColor","rectFill","textFill","strokeWidth","svgClick","nodeData","id","simulation","SVG","defs","marker","relMap_g","edges","circles","texts","markerWidth","init","configPar","_that","forceSimulation","force","forceLink","d","forceCenter","forceManyBody","strength","distanceMax","forceCollide","iterations","alphaDecay","select","append","attr","call","zoom","on","event","transform","e","target","tagName","setPatterns","gedges","setEdges","setCircles","simulationTick","selectAll","remove","s","data","patterns","enter","style","fill","text","name","getDis","source","str","color","type","textClick","typeKey","stroke","highlightObject","drag","offset","getTransform","x","y","update","alphaTarget","restart","setTimeout","search","txt","attrs","res","forEach","v","i","length","indexOf","push","highlighted","dependsNode","dependsLinkAndText","obj","objIndex","index","concat","lkItem","filter","transition","dragstarted","active","subject","fx","fy","dragged","dragended","t","Math","sqrt","_dis","asin","PI"],"mappings":"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","sourcesContent":["const d3 = require('d3');\n/**\n * 关系力导向图 - d3.js制作   （pc,wap通用）\n * @param id    {string} 父容器id\n * @param configPar      {JSON对象}    配置\n */\nexport default {\n  config: {\n    width: 300, // 总画布svg的宽\n    height: 300,\n    nodes: [],\n    links: [],\n    isScale: true,      //是否启用缩放平移zoom功能\n    scaleExtent: [0.1, 4],  //缩放的比例尺\n    chargeStrength: 400,    //万有引力\n    collide: 70,        //碰撞力的大小 （节点之间的间距）\n    r: 30,      // 头像的半径 [30 - 45]\n    linkColor: '#bad4ed',    //链接线默认的颜色\n    markerColor: \"steelblue\",\n    rectFill: \"blue\",\n    textFill: \"#c2c2c2\",\n    strokeWidth: 2, // 头像外围包裹的宽度\n    svgClick: null\n  },\n  nodeData: null,\n  id: null,\n  simulation: null,\n  SVG: null,\n  defs: null,\n  marker: null,\n  relMap_g: null,\n  links: null,\n  edges: null,\n  circles: null,\n  texts: null,\n  markerWidth: 10,\n\n  init(id, configPar) {\n    this.id = id\n    this.nodeData = null;\n\n    this.config = {\n      ...this.config,\n      ...configPar\n    }\n    var _that = this;\n    // var timeout;//定时器\n\n\n    // 1. 创建一个力学模拟器\n    this.simulation = d3.forceSimulation(this.config.nodes)\n      .force(\"link\", d3.forceLink(this.config.links).id(d => d.id))\n      .force(\"center\", d3.forceCenter(this.config.width / 2 + 150, this.config.height / 2))\n      .force(\"charge\", d3.forceManyBody().strength(this.config.chargeStrength).distanceMax(100))\n      .force(\"collide\", d3.forceCollide(this.config.collide).strength(0.2).iterations(5))\n      .alphaDecay(0.2)\n\n    // 2.创建svg标签\n    this.SVG = d3.select(\"#\" + id).append(\"svg\")\n      .attr(\"width\", this.config.width)\n      .attr(\"height\", this.config.height)\n      .call(d3.zoom().scaleExtent(this.config.scaleExtent).on(\"zoom\", (event) => {\n        if (this.config.isScale) {\n          _that.relMap_g.attr(\"transform\", event.transform);\n        }\n      }))\n      .on('click', (e) => {\n        if (e.target.tagName != 'circle' && e.target.tagName != 'CIRCLE') {\n          this.nodeData = null\n        }\n        if (this.config.svgClick) { this.config.svgClick(this.nodeData) }\n      })\n      .on(\"dblclick.zoom\", null);\n\n\n    this.defs = this.SVG.append('defs');\n    // 添加箭头\n    this.marker = this.defs\n      .append(\"marker\")\n      .attr('id', \"marker\")\n      .attr(\"markerWidth\", this.markerWidth)    //marker视窗的宽\n      .attr(\"markerHeight\", this.markerWidth)   //marker视窗的高\n      .attr(\"refX\", this.config.r + 6 + this.config.strokeWidth) //refX和refY，指的是图形元素和marker连接的位置坐标\n      .attr(\"refY\", 4)\n      .attr(\"orient\", \"auto\")     //orient=\"auto\"设置箭头的方向为自动适应线条的方向\n      .attr(\"markerUnits\", \"userSpaceOnUse\")  //marker是否进行缩放 ,默认值是strokeWidth,会缩放\n      .append(\"path\")\n      .attr(\"d\", \"M 0 0 8 4 0 8Z\")\n      .attr(\"fill\", this.config.markerColor);\n\n    this.setPatterns()\n\n\n    // 放关系图的容器\n    this.relMap_g = this.SVG.append(\"g\")\n      .attr(\"class\", \"relMap_g\")\n      .attr(\"width\", this.config.width)\n      .attr(\"height\", this.config.height);\n\n    this.gedges = this.relMap_g.append('g').attr('class', 'edges')\n\n    this.setEdges()\n\n    this.setCircles()\n\n    this.simulationTick()\n    return this\n  },\n  // 添加多个头像图片的 <pattern>\n  setPatterns() {\n    this.defs.selectAll(\"pattern.patternclass\").remove()\n    let s = this.defs\n      .selectAll(\"pattern.patternclass\")\n      .data(this.config.nodes)\n    // s.exit().remove()\n    let patterns = s.enter().append(\"pattern\")\n      .attr(\"class\", \"patternclass\")\n      .attr(\"id\", (d) => {\n        return 'avatar' + this.id + d.id;\n      })\n      .attr(\"width\", \"1\")\n      .attr(\"height\", \"1\");\n\n    // 姓名的背景\n    patterns.append(\"rect\").attr(\"x\", \"0\").attr(\"y\", 0)\n      .attr(\"width\", 2 * this.config.r)\n      .attr(\"height\", 2 * this.config.r)\n      .attr(\"fill\", (d) => {\n        return d.style.fill || this.config.rectFill\n      })\n\n    // 姓名\n    patterns.append(\"text\")\n      .attr(\"x\", this.config.r).attr(\"y\", (1.14 * this.config.r))\n      .attr('text-anchor', 'middle')\n      .attr(\"fill\", \"#fff\")\n      .style(\"font-size\", this.config.r / 3)\n      .text(function (d) {\n        return d.name;\n      });\n  },\n  setEdges() {\n    let _that = this\n    this.gedges.selectAll(\"g.edge\").remove()\n    let s = this.gedges\n      .selectAll(\"g.edge\")\n      .data(this.config.links)\n    // s.exit().remove()\n\n    let edges = s.enter().append(\"g\")\n      .attr(\"class\", \"edge\")\n\n    // 5.2 添加线\n    edges.append(\"path\").attr(\"class\", \"links\")\n      .attr(\"id\", (d) => {\n        return 'path' + _that.id + d.id;\n      })\n      // this.config.r + this.markerWidth 圆半径加箭头宽度\n      .attr(\"d\", d => { return \"M\" + (_that.config.r + _that.markerWidth) + \",\" + 0 + \" L\" + getDis(d.source, d.target) + \",0\"; })\n      .style(\"marker-end\", \"url(#marker)\")\n      .attr('stroke', (d) => {\n        var str = d.color ? d.color : _that.config.linkColor;\n        return str;\n      });\n\n    // 文本标签  坐标（x,y）代表 文本的左下角的点\n    edges.append(\"text\").attr(\"class\", \"texts\")\n      .attr('y', -2)\n      .attr('fill', this.config.textFill)\n      .attr(\"text-anchor\", \"end\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"font-size\", 8).text(d => { return d.type })\n      .on('mouseover', function () {\n        d3.select(this).attr('fill', '#ffffff').style(\"font-size\", 10);\n      })\n      .on('mouseout', function () {\n        d3.select(this).attr('fill', _that.config.textFill).style(\"font-size\", 8);\n      })\n      .on('click', () => {\n        this.config.textClick && this.config.textClick()\n      })\n      // .append('textPath').attr('yxlink:href', function(d) {\n      //   return (\"url(#path\" + _that.id + d.id + \")\")\n      // })\n\n    this.edges = this.gedges.selectAll(\"g.edge\")\n    this.links = this.gedges.selectAll(\"path.links\")\n    this.texts = this.gedges.selectAll(\"text.texts\")\n  },\n  // 关系图添加用于显示头像的节点\n  setCircles() {\n    let _that = this\n    this.relMap_g.selectAll(\"circle.circleclass\").remove()\n\n    let s = this.relMap_g\n      .selectAll(\"circle.circleclass\")\n      .data(this.config.nodes)\n    // s.exit().remove()\n\n    s.enter().append(\"circle\")\n      .attr(\"class\", (d) => {\n        return \"circleclass i\" + d.typeKey\n      })\n      .style(\"cursor\", \"pointer\")\n      .attr(\"fill\", function (d) {\n        return (\"url(#avatar\" + _that.id + d.id + \")\");\n      })\n      .attr(\"stroke\", function (d) {\n        return d.style.stroke || \"#ccf1fc\";\n      })\n      .attr(\"stroke-width\", this.config.strokeWidth)\n      .attr(\"r\", this.config.r)\n      .on('mouseover', function () {\n        d3.select(this).attr('stroke-width', '4');\n        d3.select(this).attr('stroke', '#a3e5f9');\n      })\n      .on('mouseout', function () {\n        d3.select(this).attr('stroke-width', _that.config.strokeWidth);\n        d3.select(this).attr('stroke', function (d) {\n          return d.style.stroke || \"#ccf1fc\";\n        });\n      })\n      .on('click', function (event, d) {\n        _that.nodeData = d\n      })\n      .on(\"dblclick\", function (event, d) {\n        _that.highlightObject(d)\n      })\n      .call(drag(this.simulation));\n\n      this.circles = this.relMap_g.selectAll(\"circle.circleclass\")\n  },\n  simulationTick() {\n    let offset = (this.config.r + this.markerWidth)\n    this.simulation.on(\"tick\", () => {\n      // 修改每条容器edge的位置\n      this.edges.attr(\"transform\", function (d) {\n        return getTransform(d.source, d.target, getDis(d.source, d.target))\n      });\n\n      // 修改每条线link位置\n      this.links.attr(\"d\", d => { return \"M\" + (this.config.r + this.markerWidth) + \",\" + 0 + \" L\" + getDis(d.source, d.target) + \",0\"; })\n\n      // 修改线中关系文字text的位置 及 文字的反正\n      this.texts\n        .attr(\"x\", function (d) {\n          if (d.target.x > d.source.x) {\n            return getDis(d.source, d.target) - offset\n          } else  {\n            return offset\n          }\n          // return d.target.x - d.source.x + 40\n        })\n        // .attr(\"x\", function (d) {\n        //   return getDis(d.source, d.target) / 2\n        // })\n        .attr(\"text-anchor\", function (d) {\n          if (d.source.x > d.target.x) {\n            return 'start'\n          } else  {\n            return 'end'\n          }\n          // return d.target.x - d.source.x + 40\n        })\n        // .attr(\"x\", this.config.r + this.markerWidth)\n        .attr(\"transform\", function (d) {\n          // 更新文本反正\n          if (d.target.x < d.source.x) {\n            var x = getDis(d.source, d.target) / 2;\n            return 'rotate(180 ' + x + ' ' + 0 + ')';\n          } else {\n            return 'rotate(0)';\n          }\n        });\n\n      // 修改节点的位置\n      this.circles\n        .attr(\"cx\", function (d) {\n          return d.x;\n        })\n        .attr(\"cy\", function (d) {\n          return d.y;\n        })\n    });\n  },\n  /**\n   * 更新视图\n   */\n  update(configPar) {\n    this.config = {\n      ...this.config,\n      ...configPar\n    }\n    this.simulation.nodes(this.config.nodes)\n      .force(\"link\", d3.forceLink(this.config.links).id(d => d.id))\n      .alphaTarget(0.2)\n      .restart()\n      setTimeout(()=> {\n        this.simulation.alphaTarget(0);\n      }, 200)\n\n    this.setPatterns()\n\n    this.setEdges()\n\n    this.setCircles()\n\n  },\n  search(txt, attrs) {\n    if (!txt) {\n      return []\n    }\n    let res = []\n    this.config.nodes.forEach(v => {\n      for (let i = 0; i < attrs.length; i++) {\n        const attr = attrs[i];\n        if (v[attr] && v[attr].indexOf(txt) > -1) {\n          res.push(v)\n          return\n        }\n      }\n    })\n    return res\n  },\n  highlighted: null,\n  dependsNode: [],\n  dependsLinkAndText: [],\n  highlightObject(obj) {\n    var _that = this;\n    if (obj) {\n      var objIndex = obj.index;\n      _that.dependsNode = _that.dependsNode.concat([objIndex]);\n      _that.dependsLinkAndText = _that.dependsLinkAndText.concat([objIndex]);\n      _that.config.links.forEach(function (lkItem) {\n        if (objIndex == lkItem['source']['index']) {\n          _that.dependsNode = _that.dependsNode.concat([lkItem.target.index]);\n        } else if (objIndex == lkItem['target']['index']) {\n          _that.dependsNode = _that.dependsNode.concat([lkItem.source.index]);\n        }\n      });\n\n      // 隐藏节点\n      _that.SVG.selectAll('circle').filter(function (d) {\n        return (_that.dependsNode.indexOf(d.index) == -1);\n      }).transition().style('opacity', 0.1);\n      // 隐藏线\n      _that.SVG.selectAll('.edge').filter(function (d) {\n        // return true;\n        return ((_that.dependsLinkAndText.indexOf(d.source.index) == -1) && (_that.dependsLinkAndText.indexOf(d.target.index) == -1))\n      }).transition().style('opacity', 0.1);\n\n    } else {\n      // 恢复隐藏的线\n      _that.SVG.selectAll('circle').transition().style('opacity', 1);\n      // 恢复隐藏的线\n      _that.SVG.selectAll('.edge').transition().style('opacity', 1);\n      _that.highlighted = null\n      _that.dependsNode = []\n      _that.dependsLinkAndText = []\n    }\n  }\n\n}\n\nfunction drag(simulation) {\n  function dragstarted(event) {\n    if (!event.active) simulation.alphaTarget(0.1).restart();\n    event.subject.fx = event.subject.x;\n    event.subject.fy = event.subject.y;\n  }\n\n  function dragged(event) {\n    event.subject.fx = event.x;\n    event.subject.fy = event.y;\n  }\n\n  function dragended(event) {\n    if (!event.active) simulation.alphaTarget(0);\n    event.subject.fx = null;\n    event.subject.fy = null;\n  }\n\n  return d3.drag()\n    .on(\"start\", dragstarted)\n    .on(\"drag\", dragged)\n    .on(\"end\", dragended);\n}\n\n// 求两点间的距离\nfunction getDis(s, t) {\n  return Math.sqrt((s.x - t.x) * (s.x - t.x) + (s.y - t.y) * (s.y - t.y));\n}\n\n// 求元素移动到目标位置所需要的 transform 属性值\nfunction getTransform(source, target, _dis) {\n  var r;\n  if (target.x > source.x) {\n    if (target.y > source.y) {\n      r = Math.asin((target.y - source.y) / _dis)\n    } else {\n      r = Math.asin((source.y - target.y) / _dis);\n      r = -r;\n    }\n  } else {\n    if (target.y > source.y) {\n      r = Math.asin((target.y - source.y) / _dis);\n      r = Math.PI - r;\n    } else {\n      r = Math.asin((source.y - target.y) / _dis);\n      r -= Math.PI;\n    }\n  }\n  r = r * (180 / Math.PI);\n  return \"translate(\" + source.x + \",\" + source.y + \")rotate(\" + r + \")\";\n}"]}]}