{"remainingRequest":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/babel-loader/lib/index.js!/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/eslint-loader/index.js??ref--13-0!/Users/eruda/Documents/GitHub/project_yggdrasill/ui/src/plugins/drawForce.js","dependencies":[{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/src/plugins/drawForce.js","mtime":1618221774000},{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/eruda/Documents/GitHub/project_yggdrasill/ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9lcnVkYS9Eb2N1bWVudHMvR2l0SHViL3Byb2plY3RfeWdnZHJhc2lsbC91aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Cgp2YXIgZDMgPSByZXF1aXJlKCdkMycpOwovKioNCiAqIOWFs+ezu+WKm+WvvOWQkeWbviAtIGQzLmpz5Yi25L2cICAg77yIcGMsd2Fw6YCa55So77yJDQogKiBAcGFyYW0gaWQgICAge3N0cmluZ30g54i25a655ZmoaWQNCiAqIEBwYXJhbSBjb25maWdQYXIgICAgICB7SlNPTuWvueixoX0gICAg6YWN572uDQogKi8KCgpleHBvcnQgZGVmYXVsdCB7CiAgY29uZmlnOiB7CiAgICB3aWR0aDogMzAwLAogICAgLy8g5oC755S75biDc3Zn55qE5a69CiAgICBoZWlnaHQ6IDMwMCwKICAgIG5vZGVzOiBbXSwKICAgIGxpbmtzOiBbXSwKICAgIGlzU2NhbGU6IHRydWUsCiAgICAvL+aYr+WQpuWQr+eUqOe8qeaUvuW5s+enu3pvb23lip/og70KICAgIHNjYWxlRXh0ZW50OiBbMC4xLCA0XSwKICAgIC8v57yp5pS+55qE5q+U5L6L5bC6CiAgICBjaGFyZ2VTdHJlbmd0aDogNDAwLAogICAgLy/kuIfmnInlvJXlipsKICAgIGNvbGxpZGU6IDcwLAogICAgLy/norDmkp7lipvnmoTlpKflsI8g77yI6IqC54K55LmL6Ze055qE6Ze06Led77yJCiAgICByOiAzMCwKICAgIC8vIOWktOWDj+eahOWNiuW+hCBbMzAgLSA0NV0KICAgIGxpbmtDb2xvcjogJyNiYWQ0ZWQnLAogICAgLy/pk77mjqXnur/pu5jorqTnmoTpopzoibIKICAgIG1hcmtlckNvbG9yOiAic3RlZWxibHVlIiwKICAgIHJlY3RGaWxsOiAiYmx1ZSIsCiAgICB0ZXh0RmlsbDogIiNjMmMyYzIiLAogICAgc3Ryb2tlV2lkdGg6IDIsCiAgICAvLyDlpLTlg4/lpJblm7TljIXoo7nnmoTlrr3luqYKICAgIHN2Z0NsaWNrOiBudWxsCiAgfSwKICBub2RlRGF0YTogbnVsbCwKICBpZDogbnVsbCwKICBzaW11bGF0aW9uOiBudWxsLAogIFNWRzogbnVsbCwKICBkZWZzOiBudWxsLAogIG1hcmtlcjogbnVsbCwKICByZWxNYXBfZzogbnVsbCwKICBsaW5rczogbnVsbCwKICBlZGdlczogbnVsbCwKICBjaXJjbGVzOiBudWxsLAogIHRleHRzOiBudWxsLAogIG1hcmtlcldpZHRoOiAxMCwKICBpbml0OiBmdW5jdGlvbiBpbml0KGlkLCBjb25maWdQYXIpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5pZCA9IGlkOwogICAgdGhpcy5ub2RlRGF0YSA9IG51bGw7CiAgICB0aGlzLmNvbmZpZyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5jb25maWcpLCBjb25maWdQYXIpOwoKICAgIHZhciBfdGhhdCA9IHRoaXM7IC8vIHZhciB0aW1lb3V0Oy8v5a6a5pe25ZmoCiAgICAvLyAxLiDliJvlu7rkuIDkuKrlipvlrabmqKHmi5/lmagKCgogICAgdGhpcy5zaW11bGF0aW9uID0gZDMuZm9yY2VTaW11bGF0aW9uKHRoaXMuY29uZmlnLm5vZGVzKS5mb3JjZSgibGluayIsIGQzLmZvcmNlTGluayh0aGlzLmNvbmZpZy5saW5rcykuaWQoZnVuY3Rpb24gKGQpIHsKICAgICAgcmV0dXJuIGQuaWQ7CiAgICB9KSkuZm9yY2UoImNlbnRlciIsIGQzLmZvcmNlQ2VudGVyKHRoaXMuY29uZmlnLndpZHRoIC8gMiArIDE1MCwgdGhpcy5jb25maWcuaGVpZ2h0IC8gMikpLmZvcmNlKCJjaGFyZ2UiLCBkMy5mb3JjZU1hbnlCb2R5KCkuc3RyZW5ndGgodGhpcy5jb25maWcuY2hhcmdlU3RyZW5ndGgpLmRpc3RhbmNlTWF4KDEwMCkpLmZvcmNlKCJjb2xsaWRlIiwgZDMuZm9yY2VDb2xsaWRlKHRoaXMuY29uZmlnLmNvbGxpZGUpLnN0cmVuZ3RoKDAuMikuaXRlcmF0aW9ucyg1KSkuYWxwaGFEZWNheSgwLjIpOyAvLyAyLuWIm+W7unN2Z+agh+etvgoKICAgIHRoaXMuU1ZHID0gZDMuc2VsZWN0KCIjIiArIGlkKS5hcHBlbmQoInN2ZyIpLmF0dHIoIndpZHRoIiwgdGhpcy5jb25maWcud2lkdGgpLmF0dHIoImhlaWdodCIsIHRoaXMuY29uZmlnLmhlaWdodCkuY2FsbChkMy56b29tKCkuc2NhbGVFeHRlbnQodGhpcy5jb25maWcuc2NhbGVFeHRlbnQpLm9uKCJ6b29tIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGlmIChfdGhpcy5jb25maWcuaXNTY2FsZSkgewogICAgICAgIF90aGF0LnJlbE1hcF9nLmF0dHIoInRyYW5zZm9ybSIsIGV2ZW50LnRyYW5zZm9ybSk7CiAgICAgIH0KICAgIH0pKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS50YXJnZXQudGFnTmFtZSAhPSAnY2lyY2xlJyAmJiBlLnRhcmdldC50YWdOYW1lICE9ICdDSVJDTEUnKSB7CiAgICAgICAgX3RoaXMubm9kZURhdGEgPSBudWxsOwogICAgICB9CgogICAgICBpZiAoX3RoaXMuY29uZmlnLnN2Z0NsaWNrKSB7CiAgICAgICAgX3RoaXMuY29uZmlnLnN2Z0NsaWNrKF90aGlzLm5vZGVEYXRhKTsKICAgICAgfQogICAgfSkub24oImRibGNsaWNrLnpvb20iLCBudWxsKTsKICAgIHRoaXMuZGVmcyA9IHRoaXMuU1ZHLmFwcGVuZCgnZGVmcycpOyAvLyDmt7vliqDnrq3lpLQKCiAgICB0aGlzLm1hcmtlciA9IHRoaXMuZGVmcy5hcHBlbmQoIm1hcmtlciIpLmF0dHIoJ2lkJywgIm1hcmtlciIpLmF0dHIoIm1hcmtlcldpZHRoIiwgdGhpcy5tYXJrZXJXaWR0aCkgLy9tYXJrZXLop4bnqpfnmoTlrr0KICAgIC5hdHRyKCJtYXJrZXJIZWlnaHQiLCB0aGlzLm1hcmtlcldpZHRoKSAvL21hcmtlcuinhueql+eahOmrmAogICAgLmF0dHIoInJlZlgiLCB0aGlzLmNvbmZpZy5yICsgNiArIHRoaXMuY29uZmlnLnN0cm9rZVdpZHRoKSAvL3JlZljlkoxyZWZZ77yM5oyH55qE5piv5Zu+5b2i5YWD57Sg5ZKMbWFya2Vy6L+e5o6l55qE5L2N572u5Z2Q5qCHCiAgICAuYXR0cigicmVmWSIsIDQpLmF0dHIoIm9yaWVudCIsICJhdXRvIikgLy9vcmllbnQ9ImF1dG8i6K6+572u566t5aS055qE5pa55ZCR5Li66Ieq5Yqo6YCC5bqU57q/5p2h55qE5pa55ZCRCiAgICAuYXR0cigibWFya2VyVW5pdHMiLCAidXNlclNwYWNlT25Vc2UiKSAvL21hcmtlcuaYr+WQpui/m+ihjOe8qeaUviAs6buY6K6k5YC85pivc3Ryb2tlV2lkdGgs5Lya57yp5pS+CiAgICAuYXBwZW5kKCJwYXRoIikuYXR0cigiZCIsICJNIDAgMCA4IDQgMCA4WiIpLmF0dHIoImZpbGwiLCB0aGlzLmNvbmZpZy5tYXJrZXJDb2xvcik7CiAgICB0aGlzLnNldFBhdHRlcm5zKCk7IC8vIOaUvuWFs+ezu+WbvueahOWuueWZqAoKICAgIHRoaXMucmVsTWFwX2cgPSB0aGlzLlNWRy5hcHBlbmQoImciKS5hdHRyKCJjbGFzcyIsICJyZWxNYXBfZyIpLmF0dHIoIndpZHRoIiwgdGhpcy5jb25maWcud2lkdGgpLmF0dHIoImhlaWdodCIsIHRoaXMuY29uZmlnLmhlaWdodCk7CiAgICB0aGlzLmdlZGdlcyA9IHRoaXMucmVsTWFwX2cuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnZWRnZXMnKTsKICAgIHRoaXMuc2V0RWRnZXMoKTsKICAgIHRoaXMuc2V0Q2lyY2xlcygpOwogICAgdGhpcy5zaW11bGF0aW9uVGljaygpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICAvLyDmt7vliqDlpJrkuKrlpLTlg4/lm77niYfnmoQgPHBhdHRlcm4+CiAgc2V0UGF0dGVybnM6IGZ1bmN0aW9uIHNldFBhdHRlcm5zKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgdGhpcy5kZWZzLnNlbGVjdEFsbCgicGF0dGVybi5wYXR0ZXJuY2xhc3MiKS5yZW1vdmUoKTsKICAgIHZhciBzID0gdGhpcy5kZWZzLnNlbGVjdEFsbCgicGF0dGVybi5wYXR0ZXJuY2xhc3MiKS5kYXRhKHRoaXMuY29uZmlnLm5vZGVzKTsgLy8gcy5leGl0KCkucmVtb3ZlKCkKCiAgICB2YXIgcGF0dGVybnMgPSBzLmVudGVyKCkuYXBwZW5kKCJwYXR0ZXJuIikuYXR0cigiY2xhc3MiLCAicGF0dGVybmNsYXNzIikuYXR0cigiaWQiLCBmdW5jdGlvbiAoZCkgewogICAgICByZXR1cm4gJ2F2YXRhcicgKyBfdGhpczIuaWQgKyBkLmlkOwogICAgfSkuYXR0cigid2lkdGgiLCAiMSIpLmF0dHIoImhlaWdodCIsICIxIik7IC8vIOWnk+WQjeeahOiDjOaZrwoKICAgIHBhdHRlcm5zLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCAiMCIpLmF0dHIoInkiLCAwKS5hdHRyKCJ3aWR0aCIsIDIgKiB0aGlzLmNvbmZpZy5yKS5hdHRyKCJoZWlnaHQiLCAyICogdGhpcy5jb25maWcucikuYXR0cigiZmlsbCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgIHJldHVybiBkLnN0eWxlLmZpbGwgfHwgX3RoaXMyLmNvbmZpZy5yZWN0RmlsbDsKICAgIH0pOyAvLyDlp5PlkI0KCiAgICBwYXR0ZXJucy5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgdGhpcy5jb25maWcucikuYXR0cigieSIsIDEuMTQgKiB0aGlzLmNvbmZpZy5yKS5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKS5hdHRyKCJmaWxsIiwgIiNmZmYiKS5zdHlsZSgiZm9udC1zaXplIiwgdGhpcy5jb25maWcuciAvIDMpLnRleHQoZnVuY3Rpb24gKGQpIHsKICAgICAgcmV0dXJuIGQubmFtZTsKICAgIH0pOwogIH0sCiAgc2V0RWRnZXM6IGZ1bmN0aW9uIHNldEVkZ2VzKCkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgdmFyIF90aGF0ID0gdGhpczsKCiAgICB0aGlzLmdlZGdlcy5zZWxlY3RBbGwoImcuZWRnZSIpLnJlbW92ZSgpOwogICAgdmFyIHMgPSB0aGlzLmdlZGdlcy5zZWxlY3RBbGwoImcuZWRnZSIpLmRhdGEodGhpcy5jb25maWcubGlua3MpOyAvLyBzLmV4aXQoKS5yZW1vdmUoKQoKICAgIHZhciBlZGdlcyA9IHMuZW50ZXIoKS5hcHBlbmQoImciKS5hdHRyKCJjbGFzcyIsICJlZGdlIik7IC8vIDUuMiDmt7vliqDnur8KCiAgICBlZGdlcy5hcHBlbmQoInBhdGgiKS5hdHRyKCJjbGFzcyIsICJsaW5rcyIpLmF0dHIoImlkIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgcmV0dXJuICdwYXRoJyArIF90aGF0LmlkICsgZC5pZDsKICAgIH0pIC8vIHRoaXMuY29uZmlnLnIgKyB0aGlzLm1hcmtlcldpZHRoIOWchuWNiuW+hOWKoOeureWktOWuveW6pgogICAgLmF0dHIoImQiLCBmdW5jdGlvbiAoZCkgewogICAgICByZXR1cm4gIk0iICsgKF90aGF0LmNvbmZpZy5yICsgX3RoYXQubWFya2VyV2lkdGgpICsgIiwiICsgMCArICIgTCIgKyBnZXREaXMoZC5zb3VyY2UsIGQudGFyZ2V0KSArICIsMCI7CiAgICB9KS5zdHlsZSgibWFya2VyLWVuZCIsICJ1cmwoI21hcmtlcikiKS5hdHRyKCdzdHJva2UnLCBmdW5jdGlvbiAoZCkgewogICAgICB2YXIgc3RyID0gZC5jb2xvciA/IGQuY29sb3IgOiBfdGhhdC5jb25maWcubGlua0NvbG9yOwogICAgICByZXR1cm4gc3RyOwogICAgfSk7IC8vIOaWh+acrOagh+etviAg5Z2Q5qCH77yIeCx577yJ5Luj6KGoIOaWh+acrOeahOW3puS4i+inkueahOeCuQoKICAgIGVkZ2VzLmFwcGVuZCgidGV4dCIpLmF0dHIoImNsYXNzIiwgInRleHRzIikuYXR0cigneScsIC0yKS5hdHRyKCdmaWxsJywgdGhpcy5jb25maWcudGV4dEZpbGwpLmF0dHIoInRleHQtYW5jaG9yIiwgImVuZCIpLnN0eWxlKCJjdXJzb3IiLCAicG9pbnRlciIpLnN0eWxlKCJmb250LXNpemUiLCA4KS50ZXh0KGZ1bmN0aW9uIChkKSB7CiAgICAgIHJldHVybiBkLnR5cGU7CiAgICB9KS5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKCkgewogICAgICBkMy5zZWxlY3QodGhpcykuYXR0cignZmlsbCcsICcjZmZmZmZmJykuc3R5bGUoImZvbnQtc2l6ZSIsIDEwKTsKICAgIH0pLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uICgpIHsKICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoJ2ZpbGwnLCBfdGhhdC5jb25maWcudGV4dEZpbGwpLnN0eWxlKCJmb250LXNpemUiLCA4KTsKICAgIH0pLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMzLmNvbmZpZy50ZXh0Q2xpY2sgJiYgX3RoaXMzLmNvbmZpZy50ZXh0Q2xpY2soKTsKICAgIH0pOyAvLyAuYXBwZW5kKCd0ZXh0UGF0aCcpLmF0dHIoJ3l4bGluazpocmVmJywgZnVuY3Rpb24oZCkgewogICAgLy8gICByZXR1cm4gKCJ1cmwoI3BhdGgiICsgX3RoYXQuaWQgKyBkLmlkICsgIikiKQogICAgLy8gfSkKCiAgICB0aGlzLmVkZ2VzID0gdGhpcy5nZWRnZXMuc2VsZWN0QWxsKCJnLmVkZ2UiKTsKICAgIHRoaXMubGlua3MgPSB0aGlzLmdlZGdlcy5zZWxlY3RBbGwoInBhdGgubGlua3MiKTsKICAgIHRoaXMudGV4dHMgPSB0aGlzLmdlZGdlcy5zZWxlY3RBbGwoInRleHQudGV4dHMiKTsKICB9LAogIC8vIOWFs+ezu+Wbvua3u+WKoOeUqOS6juaYvuekuuWktOWDj+eahOiKgueCuQogIHNldENpcmNsZXM6IGZ1bmN0aW9uIHNldENpcmNsZXMoKSB7CiAgICB2YXIgX3RoYXQgPSB0aGlzOwoKICAgIHRoaXMucmVsTWFwX2cuc2VsZWN0QWxsKCJjaXJjbGUuY2lyY2xlY2xhc3MiKS5yZW1vdmUoKTsKICAgIHZhciBzID0gdGhpcy5yZWxNYXBfZy5zZWxlY3RBbGwoImNpcmNsZS5jaXJjbGVjbGFzcyIpLmRhdGEodGhpcy5jb25maWcubm9kZXMpOyAvLyBzLmV4aXQoKS5yZW1vdmUoKQoKICAgIHMuZW50ZXIoKS5hcHBlbmQoImNpcmNsZSIpLmF0dHIoImNsYXNzIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgcmV0dXJuICJjaXJjbGVjbGFzcyBpIiArIGQudHlwZUtleTsKICAgIH0pLnN0eWxlKCJjdXJzb3IiLCAicG9pbnRlciIpLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoZCkgewogICAgICByZXR1cm4gInVybCgjYXZhdGFyIiArIF90aGF0LmlkICsgZC5pZCArICIpIjsKICAgIH0pLmF0dHIoInN0cm9rZSIsIGZ1bmN0aW9uIChkKSB7CiAgICAgIHJldHVybiBkLnN0eWxlLnN0cm9rZSB8fCAiI2NjZjFmYyI7CiAgICB9KS5hdHRyKCJzdHJva2Utd2lkdGgiLCB0aGlzLmNvbmZpZy5zdHJva2VXaWR0aCkuYXR0cigiciIsIHRoaXMuY29uZmlnLnIpLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCdzdHJva2Utd2lkdGgnLCAnNCcpOwogICAgICBkMy5zZWxlY3QodGhpcykuYXR0cignc3Ryb2tlJywgJyNhM2U1ZjknKTsKICAgIH0pLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uICgpIHsKICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoJ3N0cm9rZS13aWR0aCcsIF90aGF0LmNvbmZpZy5zdHJva2VXaWR0aCk7CiAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCdzdHJva2UnLCBmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLnN0eWxlLnN0cm9rZSB8fCAiI2NjZjFmYyI7CiAgICAgIH0pOwogICAgfSkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50LCBkKSB7CiAgICAgIF90aGF0Lm5vZGVEYXRhID0gZDsKICAgIH0pLm9uKCJkYmxjbGljayIsIGZ1bmN0aW9uIChldmVudCwgZCkgewogICAgICBfdGhhdC5oaWdobGlnaHRPYmplY3QoZCk7CiAgICB9KS5jYWxsKGRyYWcodGhpcy5zaW11bGF0aW9uKSk7CiAgICB0aGlzLmNpcmNsZXMgPSB0aGlzLnJlbE1hcF9nLnNlbGVjdEFsbCgiY2lyY2xlLmNpcmNsZWNsYXNzIik7CiAgfSwKICBzaW11bGF0aW9uVGljazogZnVuY3Rpb24gc2ltdWxhdGlvblRpY2soKSB7CiAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICB2YXIgb2Zmc2V0ID0gdGhpcy5jb25maWcuciArIHRoaXMubWFya2VyV2lkdGg7CiAgICB0aGlzLnNpbXVsYXRpb24ub24oInRpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIOS/ruaUueavj+adoeWuueWZqGVkZ2XnmoTkvY3nva4KICAgICAgX3RoaXM0LmVkZ2VzLmF0dHIoInRyYW5zZm9ybSIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGdldFRyYW5zZm9ybShkLnNvdXJjZSwgZC50YXJnZXQsIGdldERpcyhkLnNvdXJjZSwgZC50YXJnZXQpKTsKICAgICAgfSk7IC8vIOS/ruaUueavj+adoee6v2xpbmvkvY3nva4KCgogICAgICBfdGhpczQubGlua3MuYXR0cigiZCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuICJNIiArIChfdGhpczQuY29uZmlnLnIgKyBfdGhpczQubWFya2VyV2lkdGgpICsgIiwiICsgMCArICIgTCIgKyBnZXREaXMoZC5zb3VyY2UsIGQudGFyZ2V0KSArICIsMCI7CiAgICAgIH0pOyAvLyDkv67mlLnnur/kuK3lhbPns7vmloflrZd0ZXh055qE5L2N572uIOWPiiDmloflrZfnmoTlj43mraMKCgogICAgICBfdGhpczQudGV4dHMuYXR0cigieCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgaWYgKGQudGFyZ2V0LnggPiBkLnNvdXJjZS54KSB7CiAgICAgICAgICByZXR1cm4gZ2V0RGlzKGQuc291cmNlLCBkLnRhcmdldCkgLSBvZmZzZXQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBvZmZzZXQ7CiAgICAgICAgfSAvLyByZXR1cm4gZC50YXJnZXQueCAtIGQuc291cmNlLnggKyA0MAoKICAgICAgfSkgLy8gLmF0dHIoIngiLCBmdW5jdGlvbiAoZCkgewogICAgICAvLyAgIHJldHVybiBnZXREaXMoZC5zb3VyY2UsIGQudGFyZ2V0KSAvIDIKICAgICAgLy8gfSkKICAgICAgLmF0dHIoInRleHQtYW5jaG9yIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICBpZiAoZC5zb3VyY2UueCA+IGQudGFyZ2V0LngpIHsKICAgICAgICAgIHJldHVybiAnc3RhcnQnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gJ2VuZCc7CiAgICAgICAgfSAvLyByZXR1cm4gZC50YXJnZXQueCAtIGQuc291cmNlLnggKyA0MAoKICAgICAgfSkgLy8gLmF0dHIoIngiLCB0aGlzLmNvbmZpZy5yICsgdGhpcy5tYXJrZXJXaWR0aCkKICAgICAgLmF0dHIoInRyYW5zZm9ybSIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgLy8g5pu05paw5paH5pys5Y+N5q2jCiAgICAgICAgaWYgKGQudGFyZ2V0LnggPCBkLnNvdXJjZS54KSB7CiAgICAgICAgICB2YXIgeCA9IGdldERpcyhkLnNvdXJjZSwgZC50YXJnZXQpIC8gMjsKICAgICAgICAgIHJldHVybiAncm90YXRlKDE4MCAnICsgeCArICcgJyArIDAgKyAnKSc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAncm90YXRlKDApJzsKICAgICAgICB9CiAgICAgIH0pOyAvLyDkv67mlLnoioLngrnnmoTkvY3nva4KCgogICAgICBfdGhpczQuY2lyY2xlcy5hdHRyKCJjeCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQueDsKICAgICAgfSkuYXR0cigiY3kiLCBmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLnk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKCiAgLyoqDQogICAqIOabtOaWsOinhuWbvg0KICAgKi8KICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShjb25maWdQYXIpIHsKICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgIHRoaXMuY29uZmlnID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmNvbmZpZyksIGNvbmZpZ1Bhcik7CiAgICB0aGlzLnNpbXVsYXRpb24ubm9kZXModGhpcy5jb25maWcubm9kZXMpLmZvcmNlKCJsaW5rIiwgZDMuZm9yY2VMaW5rKHRoaXMuY29uZmlnLmxpbmtzKS5pZChmdW5jdGlvbiAoZCkgewogICAgICByZXR1cm4gZC5pZDsKICAgIH0pKS5hbHBoYVRhcmdldCgwLjIpLnJlc3RhcnQoKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBfdGhpczUuc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwKTsKICAgIH0sIDIwMCk7CiAgICB0aGlzLnNldFBhdHRlcm5zKCk7CiAgICB0aGlzLnNldEVkZ2VzKCk7CiAgICB0aGlzLnNldENpcmNsZXMoKTsKICB9LAogIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKHR4dCwgYXR0cnMpIHsKICAgIGlmICghdHh0KSB7CiAgICAgIHJldHVybiBbXTsKICAgIH0KCiAgICB2YXIgcmVzID0gW107CiAgICB0aGlzLmNvbmZpZy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cnMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgYXR0ciA9IGF0dHJzW2ldOwoKICAgICAgICBpZiAodlthdHRyXSAmJiB2W2F0dHJdLmluZGV4T2YodHh0KSA+IC0xKSB7CiAgICAgICAgICByZXMucHVzaCh2KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHJlczsKICB9LAogIGhpZ2hsaWdodGVkOiBudWxsLAogIGRlcGVuZHNOb2RlOiBbXSwKICBkZXBlbmRzTGlua0FuZFRleHQ6IFtdLAogIGhpZ2hsaWdodE9iamVjdDogZnVuY3Rpb24gaGlnaGxpZ2h0T2JqZWN0KG9iaikgewogICAgdmFyIF90aGF0ID0gdGhpczsKCiAgICBpZiAob2JqKSB7CiAgICAgIHZhciBvYmpJbmRleCA9IG9iai5pbmRleDsKICAgICAgX3RoYXQuZGVwZW5kc05vZGUgPSBfdGhhdC5kZXBlbmRzTm9kZS5jb25jYXQoW29iakluZGV4XSk7CiAgICAgIF90aGF0LmRlcGVuZHNMaW5rQW5kVGV4dCA9IF90aGF0LmRlcGVuZHNMaW5rQW5kVGV4dC5jb25jYXQoW29iakluZGV4XSk7CgogICAgICBfdGhhdC5jb25maWcubGlua3MuZm9yRWFjaChmdW5jdGlvbiAobGtJdGVtKSB7CiAgICAgICAgaWYgKG9iakluZGV4ID09IGxrSXRlbVsnc291cmNlJ11bJ2luZGV4J10pIHsKICAgICAgICAgIF90aGF0LmRlcGVuZHNOb2RlID0gX3RoYXQuZGVwZW5kc05vZGUuY29uY2F0KFtsa0l0ZW0udGFyZ2V0LmluZGV4XSk7CiAgICAgICAgfSBlbHNlIGlmIChvYmpJbmRleCA9PSBsa0l0ZW1bJ3RhcmdldCddWydpbmRleCddKSB7CiAgICAgICAgICBfdGhhdC5kZXBlbmRzTm9kZSA9IF90aGF0LmRlcGVuZHNOb2RlLmNvbmNhdChbbGtJdGVtLnNvdXJjZS5pbmRleF0pOwogICAgICAgIH0KICAgICAgfSk7IC8vIOmakOiXj+iKgueCuQoKCiAgICAgIF90aGF0LlNWRy5zZWxlY3RBbGwoJ2NpcmNsZScpLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBfdGhhdC5kZXBlbmRzTm9kZS5pbmRleE9mKGQuaW5kZXgpID09IC0xOwogICAgICB9KS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwLjEpOyAvLyDpmpDol4/nur8KCgogICAgICBfdGhhdC5TVkcuc2VsZWN0QWxsKCcuZWRnZScpLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIC8vIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBfdGhhdC5kZXBlbmRzTGlua0FuZFRleHQuaW5kZXhPZihkLnNvdXJjZS5pbmRleCkgPT0gLTEgJiYgX3RoYXQuZGVwZW5kc0xpbmtBbmRUZXh0LmluZGV4T2YoZC50YXJnZXQuaW5kZXgpID09IC0xOwogICAgICB9KS50cmFuc2l0aW9uKCkuc3R5bGUoJ29wYWNpdHknLCAwLjEpOwogICAgfSBlbHNlIHsKICAgICAgLy8g5oGi5aSN6ZqQ6JeP55qE57q/CiAgICAgIF90aGF0LlNWRy5zZWxlY3RBbGwoJ2NpcmNsZScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpOyAvLyDmgaLlpI3pmpDol4/nmoTnur8KCgogICAgICBfdGhhdC5TVkcuc2VsZWN0QWxsKCcuZWRnZScpLnRyYW5zaXRpb24oKS5zdHlsZSgnb3BhY2l0eScsIDEpOwoKICAgICAgX3RoYXQuaGlnaGxpZ2h0ZWQgPSBudWxsOwogICAgICBfdGhhdC5kZXBlbmRzTm9kZSA9IFtdOwogICAgICBfdGhhdC5kZXBlbmRzTGlua0FuZFRleHQgPSBbXTsKICAgIH0KICB9Cn07CgpmdW5jdGlvbiBkcmFnKHNpbXVsYXRpb24pIHsKICBmdW5jdGlvbiBkcmFnc3RhcnRlZChldmVudCkgewogICAgaWYgKCFldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMC4xKS5yZXN0YXJ0KCk7CiAgICBldmVudC5zdWJqZWN0LmZ4ID0gZXZlbnQuc3ViamVjdC54OwogICAgZXZlbnQuc3ViamVjdC5meSA9IGV2ZW50LnN1YmplY3QueTsKICB9CgogIGZ1bmN0aW9uIGRyYWdnZWQoZXZlbnQpIHsKICAgIGV2ZW50LnN1YmplY3QuZnggPSBldmVudC54OwogICAgZXZlbnQuc3ViamVjdC5meSA9IGV2ZW50Lnk7CiAgfQoKICBmdW5jdGlvbiBkcmFnZW5kZWQoZXZlbnQpIHsKICAgIGlmICghZXZlbnQuYWN0aXZlKSBzaW11bGF0aW9uLmFscGhhVGFyZ2V0KDApOwogICAgZXZlbnQuc3ViamVjdC5meCA9IG51bGw7CiAgICBldmVudC5zdWJqZWN0LmZ5ID0gbnVsbDsKICB9CgogIHJldHVybiBkMy5kcmFnKCkub24oInN0YXJ0IiwgZHJhZ3N0YXJ0ZWQpLm9uKCJkcmFnIiwgZHJhZ2dlZCkub24oImVuZCIsIGRyYWdlbmRlZCk7Cn0gLy8g5rGC5Lik54K56Ze055qE6Led56a7CgoKZnVuY3Rpb24gZ2V0RGlzKHMsIHQpIHsKICByZXR1cm4gTWF0aC5zcXJ0KChzLnggLSB0LngpICogKHMueCAtIHQueCkgKyAocy55IC0gdC55KSAqIChzLnkgLSB0LnkpKTsKfSAvLyDmsYLlhYPntKDnp7vliqjliLDnm67moIfkvY3nva7miYDpnIDopoHnmoQgdHJhbnNmb3JtIOWxnuaAp+WAvAoKCmZ1bmN0aW9uIGdldFRyYW5zZm9ybShzb3VyY2UsIHRhcmdldCwgX2RpcykgewogIHZhciByOwoKICBpZiAodGFyZ2V0LnggPiBzb3VyY2UueCkgewogICAgaWYgKHRhcmdldC55ID4gc291cmNlLnkpIHsKICAgICAgciA9IE1hdGguYXNpbigodGFyZ2V0LnkgLSBzb3VyY2UueSkgLyBfZGlzKTsKICAgIH0gZWxzZSB7CiAgICAgIHIgPSBNYXRoLmFzaW4oKHNvdXJjZS55IC0gdGFyZ2V0LnkpIC8gX2Rpcyk7CiAgICAgIHIgPSAtcjsKICAgIH0KICB9IGVsc2UgewogICAgaWYgKHRhcmdldC55ID4gc291cmNlLnkpIHsKICAgICAgciA9IE1hdGguYXNpbigodGFyZ2V0LnkgLSBzb3VyY2UueSkgLyBfZGlzKTsKICAgICAgciA9IE1hdGguUEkgLSByOwogICAgfSBlbHNlIHsKICAgICAgciA9IE1hdGguYXNpbigoc291cmNlLnkgLSB0YXJnZXQueSkgLyBfZGlzKTsKICAgICAgciAtPSBNYXRoLlBJOwogICAgfQogIH0KCiAgciA9IHIgKiAoMTgwIC8gTWF0aC5QSSk7CiAgcmV0dXJuICJ0cmFuc2xhdGUoIiArIHNvdXJjZS54ICsgIiwiICsgc291cmNlLnkgKyAiKXJvdGF0ZSgiICsgciArICIpIjsKfQ=="},{"version":3,"sources":["/Users/eruda/Documents/GitHub/project_yggdrasill/ui/src/plugins/drawForce.js"],"names":["d3","require","config","width","height","nodes","links","isScale","scaleExtent","chargeStrength","collide","r","linkColor","markerColor","rectFill","textFill","strokeWidth","svgClick","nodeData","id","simulation","SVG","defs","marker","relMap_g","edges","circles","texts","markerWidth","init","configPar","_that","forceSimulation","force","forceLink","d","forceCenter","forceManyBody","strength","distanceMax","forceCollide","iterations","alphaDecay","select","append","attr","call","zoom","on","event","transform","e","target","tagName","setPatterns","gedges","setEdges","setCircles","simulationTick","selectAll","remove","s","data","patterns","enter","style","fill","text","name","getDis","source","str","color","type","textClick","typeKey","stroke","highlightObject","drag","offset","getTransform","x","y","update","alphaTarget","restart","setTimeout","search","txt","attrs","res","forEach","v","i","length","indexOf","push","highlighted","dependsNode","dependsLinkAndText","obj","objIndex","index","concat","lkItem","filter","transition","dragstarted","active","subject","fx","fy","dragged","dragended","t","Math","sqrt","_dis","asin","PI"],"mappings":"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","sourcesContent":["const d3 = require('d3');\r\n/**\r\n * 关系力导向图 - d3.js制作   （pc,wap通用）\r\n * @param id    {string} 父容器id\r\n * @param configPar      {JSON对象}    配置\r\n */\r\nexport default {\r\n  config: {\r\n    width: 300, // 总画布svg的宽\r\n    height: 300,\r\n    nodes: [],\r\n    links: [],\r\n    isScale: true,      //是否启用缩放平移zoom功能\r\n    scaleExtent: [0.1, 4],  //缩放的比例尺\r\n    chargeStrength: 400,    //万有引力\r\n    collide: 70,        //碰撞力的大小 （节点之间的间距）\r\n    r: 30,      // 头像的半径 [30 - 45]\r\n    linkColor: '#bad4ed',    //链接线默认的颜色\r\n    markerColor: \"steelblue\",\r\n    rectFill: \"blue\",\r\n    textFill: \"#c2c2c2\",\r\n    strokeWidth: 2, // 头像外围包裹的宽度\r\n    svgClick: null\r\n  },\r\n  nodeData: null,\r\n  id: null,\r\n  simulation: null,\r\n  SVG: null,\r\n  defs: null,\r\n  marker: null,\r\n  relMap_g: null,\r\n  links: null,\r\n  edges: null,\r\n  circles: null,\r\n  texts: null,\r\n  markerWidth: 10,\r\n\r\n  init(id, configPar) {\r\n    this.id = id\r\n    this.nodeData = null;\r\n\r\n    this.config = {\r\n      ...this.config,\r\n      ...configPar\r\n    }\r\n    var _that = this;\r\n    // var timeout;//定时器\r\n\r\n\r\n    // 1. 创建一个力学模拟器\r\n    this.simulation = d3.forceSimulation(this.config.nodes)\r\n      .force(\"link\", d3.forceLink(this.config.links).id(d => d.id))\r\n      .force(\"center\", d3.forceCenter(this.config.width / 2 + 150, this.config.height / 2))\r\n      .force(\"charge\", d3.forceManyBody().strength(this.config.chargeStrength).distanceMax(100))\r\n      .force(\"collide\", d3.forceCollide(this.config.collide).strength(0.2).iterations(5))\r\n      .alphaDecay(0.2)\r\n\r\n    // 2.创建svg标签\r\n    this.SVG = d3.select(\"#\" + id).append(\"svg\")\r\n      .attr(\"width\", this.config.width)\r\n      .attr(\"height\", this.config.height)\r\n      .call(d3.zoom().scaleExtent(this.config.scaleExtent).on(\"zoom\", (event) => {\r\n        if (this.config.isScale) {\r\n          _that.relMap_g.attr(\"transform\", event.transform);\r\n        }\r\n      }))\r\n      .on('click', (e) => {\r\n        if (e.target.tagName != 'circle' && e.target.tagName != 'CIRCLE') {\r\n          this.nodeData = null\r\n        }\r\n        if (this.config.svgClick) { this.config.svgClick(this.nodeData) }\r\n      })\r\n      .on(\"dblclick.zoom\", null);\r\n\r\n\r\n    this.defs = this.SVG.append('defs');\r\n    // 添加箭头\r\n    this.marker = this.defs\r\n      .append(\"marker\")\r\n      .attr('id', \"marker\")\r\n      .attr(\"markerWidth\", this.markerWidth)    //marker视窗的宽\r\n      .attr(\"markerHeight\", this.markerWidth)   //marker视窗的高\r\n      .attr(\"refX\", this.config.r + 6 + this.config.strokeWidth) //refX和refY，指的是图形元素和marker连接的位置坐标\r\n      .attr(\"refY\", 4)\r\n      .attr(\"orient\", \"auto\")     //orient=\"auto\"设置箭头的方向为自动适应线条的方向\r\n      .attr(\"markerUnits\", \"userSpaceOnUse\")  //marker是否进行缩放 ,默认值是strokeWidth,会缩放\r\n      .append(\"path\")\r\n      .attr(\"d\", \"M 0 0 8 4 0 8Z\")\r\n      .attr(\"fill\", this.config.markerColor);\r\n\r\n    this.setPatterns()\r\n\r\n\r\n    // 放关系图的容器\r\n    this.relMap_g = this.SVG.append(\"g\")\r\n      .attr(\"class\", \"relMap_g\")\r\n      .attr(\"width\", this.config.width)\r\n      .attr(\"height\", this.config.height);\r\n\r\n    this.gedges = this.relMap_g.append('g').attr('class', 'edges')\r\n\r\n    this.setEdges()\r\n\r\n    this.setCircles()\r\n\r\n    this.simulationTick()\r\n    return this\r\n  },\r\n  // 添加多个头像图片的 <pattern>\r\n  setPatterns() {\r\n    this.defs.selectAll(\"pattern.patternclass\").remove()\r\n    let s = this.defs\r\n      .selectAll(\"pattern.patternclass\")\r\n      .data(this.config.nodes)\r\n    // s.exit().remove()\r\n    let patterns = s.enter().append(\"pattern\")\r\n      .attr(\"class\", \"patternclass\")\r\n      .attr(\"id\", (d) => {\r\n        return 'avatar' + this.id + d.id;\r\n      })\r\n      .attr(\"width\", \"1\")\r\n      .attr(\"height\", \"1\");\r\n\r\n    // 姓名的背景\r\n    patterns.append(\"rect\").attr(\"x\", \"0\").attr(\"y\", 0)\r\n      .attr(\"width\", 2 * this.config.r)\r\n      .attr(\"height\", 2 * this.config.r)\r\n      .attr(\"fill\", (d) => {\r\n        return d.style.fill || this.config.rectFill\r\n      })\r\n\r\n    // 姓名\r\n    patterns.append(\"text\")\r\n      .attr(\"x\", this.config.r).attr(\"y\", (1.14 * this.config.r))\r\n      .attr('text-anchor', 'middle')\r\n      .attr(\"fill\", \"#fff\")\r\n      .style(\"font-size\", this.config.r / 3)\r\n      .text(function (d) {\r\n        return d.name;\r\n      });\r\n  },\r\n  setEdges() {\r\n    let _that = this\r\n    this.gedges.selectAll(\"g.edge\").remove()\r\n    let s = this.gedges\r\n      .selectAll(\"g.edge\")\r\n      .data(this.config.links)\r\n    // s.exit().remove()\r\n\r\n    let edges = s.enter().append(\"g\")\r\n      .attr(\"class\", \"edge\")\r\n\r\n    // 5.2 添加线\r\n    edges.append(\"path\").attr(\"class\", \"links\")\r\n      .attr(\"id\", (d) => {\r\n        return 'path' + _that.id + d.id;\r\n      })\r\n      // this.config.r + this.markerWidth 圆半径加箭头宽度\r\n      .attr(\"d\", d => { return \"M\" + (_that.config.r + _that.markerWidth) + \",\" + 0 + \" L\" + getDis(d.source, d.target) + \",0\"; })\r\n      .style(\"marker-end\", \"url(#marker)\")\r\n      .attr('stroke', (d) => {\r\n        var str = d.color ? d.color : _that.config.linkColor;\r\n        return str;\r\n      });\r\n\r\n    // 文本标签  坐标（x,y）代表 文本的左下角的点\r\n    edges.append(\"text\").attr(\"class\", \"texts\")\r\n      .attr('y', -2)\r\n      .attr('fill', this.config.textFill)\r\n      .attr(\"text-anchor\", \"end\")\r\n      .style(\"cursor\", \"pointer\")\r\n      .style(\"font-size\", 8).text(d => { return d.type })\r\n      .on('mouseover', function () {\r\n        d3.select(this).attr('fill', '#ffffff').style(\"font-size\", 10);\r\n      })\r\n      .on('mouseout', function () {\r\n        d3.select(this).attr('fill', _that.config.textFill).style(\"font-size\", 8);\r\n      })\r\n      .on('click', () => {\r\n        this.config.textClick && this.config.textClick()\r\n      })\r\n      // .append('textPath').attr('yxlink:href', function(d) {\r\n      //   return (\"url(#path\" + _that.id + d.id + \")\")\r\n      // })\r\n\r\n    this.edges = this.gedges.selectAll(\"g.edge\")\r\n    this.links = this.gedges.selectAll(\"path.links\")\r\n    this.texts = this.gedges.selectAll(\"text.texts\")\r\n  },\r\n  // 关系图添加用于显示头像的节点\r\n  setCircles() {\r\n    let _that = this\r\n    this.relMap_g.selectAll(\"circle.circleclass\").remove()\r\n\r\n    let s = this.relMap_g\r\n      .selectAll(\"circle.circleclass\")\r\n      .data(this.config.nodes)\r\n    // s.exit().remove()\r\n\r\n    s.enter().append(\"circle\")\r\n      .attr(\"class\", (d) => {\r\n        return \"circleclass i\" + d.typeKey\r\n      })\r\n      .style(\"cursor\", \"pointer\")\r\n      .attr(\"fill\", function (d) {\r\n        return (\"url(#avatar\" + _that.id + d.id + \")\");\r\n      })\r\n      .attr(\"stroke\", function (d) {\r\n        return d.style.stroke || \"#ccf1fc\";\r\n      })\r\n      .attr(\"stroke-width\", this.config.strokeWidth)\r\n      .attr(\"r\", this.config.r)\r\n      .on('mouseover', function () {\r\n        d3.select(this).attr('stroke-width', '4');\r\n        d3.select(this).attr('stroke', '#a3e5f9');\r\n      })\r\n      .on('mouseout', function () {\r\n        d3.select(this).attr('stroke-width', _that.config.strokeWidth);\r\n        d3.select(this).attr('stroke', function (d) {\r\n          return d.style.stroke || \"#ccf1fc\";\r\n        });\r\n      })\r\n      .on('click', function (event, d) {\r\n        _that.nodeData = d\r\n      })\r\n      .on(\"dblclick\", function (event, d) {\r\n        _that.highlightObject(d)\r\n      })\r\n      .call(drag(this.simulation));\r\n\r\n      this.circles = this.relMap_g.selectAll(\"circle.circleclass\")\r\n  },\r\n  simulationTick() {\r\n    let offset = (this.config.r + this.markerWidth)\r\n    this.simulation.on(\"tick\", () => {\r\n      // 修改每条容器edge的位置\r\n      this.edges.attr(\"transform\", function (d) {\r\n        return getTransform(d.source, d.target, getDis(d.source, d.target))\r\n      });\r\n\r\n      // 修改每条线link位置\r\n      this.links.attr(\"d\", d => { return \"M\" + (this.config.r + this.markerWidth) + \",\" + 0 + \" L\" + getDis(d.source, d.target) + \",0\"; })\r\n\r\n      // 修改线中关系文字text的位置 及 文字的反正\r\n      this.texts\r\n        .attr(\"x\", function (d) {\r\n          if (d.target.x > d.source.x) {\r\n            return getDis(d.source, d.target) - offset\r\n          } else  {\r\n            return offset\r\n          }\r\n          // return d.target.x - d.source.x + 40\r\n        })\r\n        // .attr(\"x\", function (d) {\r\n        //   return getDis(d.source, d.target) / 2\r\n        // })\r\n        .attr(\"text-anchor\", function (d) {\r\n          if (d.source.x > d.target.x) {\r\n            return 'start'\r\n          } else  {\r\n            return 'end'\r\n          }\r\n          // return d.target.x - d.source.x + 40\r\n        })\r\n        // .attr(\"x\", this.config.r + this.markerWidth)\r\n        .attr(\"transform\", function (d) {\r\n          // 更新文本反正\r\n          if (d.target.x < d.source.x) {\r\n            var x = getDis(d.source, d.target) / 2;\r\n            return 'rotate(180 ' + x + ' ' + 0 + ')';\r\n          } else {\r\n            return 'rotate(0)';\r\n          }\r\n        });\r\n\r\n      // 修改节点的位置\r\n      this.circles\r\n        .attr(\"cx\", function (d) {\r\n          return d.x;\r\n        })\r\n        .attr(\"cy\", function (d) {\r\n          return d.y;\r\n        })\r\n    });\r\n  },\r\n  /**\r\n   * 更新视图\r\n   */\r\n  update(configPar) {\r\n    this.config = {\r\n      ...this.config,\r\n      ...configPar\r\n    }\r\n    this.simulation.nodes(this.config.nodes)\r\n      .force(\"link\", d3.forceLink(this.config.links).id(d => d.id))\r\n      .alphaTarget(0.2)\r\n      .restart()\r\n      setTimeout(()=> {\r\n        this.simulation.alphaTarget(0);\r\n      }, 200)\r\n\r\n    this.setPatterns()\r\n\r\n    this.setEdges()\r\n\r\n    this.setCircles()\r\n\r\n  },\r\n  search(txt, attrs) {\r\n    if (!txt) {\r\n      return []\r\n    }\r\n    let res = []\r\n    this.config.nodes.forEach(v => {\r\n      for (let i = 0; i < attrs.length; i++) {\r\n        const attr = attrs[i];\r\n        if (v[attr] && v[attr].indexOf(txt) > -1) {\r\n          res.push(v)\r\n          return\r\n        }\r\n      }\r\n    })\r\n    return res\r\n  },\r\n  highlighted: null,\r\n  dependsNode: [],\r\n  dependsLinkAndText: [],\r\n  highlightObject(obj) {\r\n    var _that = this;\r\n    if (obj) {\r\n      var objIndex = obj.index;\r\n      _that.dependsNode = _that.dependsNode.concat([objIndex]);\r\n      _that.dependsLinkAndText = _that.dependsLinkAndText.concat([objIndex]);\r\n      _that.config.links.forEach(function (lkItem) {\r\n        if (objIndex == lkItem['source']['index']) {\r\n          _that.dependsNode = _that.dependsNode.concat([lkItem.target.index]);\r\n        } else if (objIndex == lkItem['target']['index']) {\r\n          _that.dependsNode = _that.dependsNode.concat([lkItem.source.index]);\r\n        }\r\n      });\r\n\r\n      // 隐藏节点\r\n      _that.SVG.selectAll('circle').filter(function (d) {\r\n        return (_that.dependsNode.indexOf(d.index) == -1);\r\n      }).transition().style('opacity', 0.1);\r\n      // 隐藏线\r\n      _that.SVG.selectAll('.edge').filter(function (d) {\r\n        // return true;\r\n        return ((_that.dependsLinkAndText.indexOf(d.source.index) == -1) && (_that.dependsLinkAndText.indexOf(d.target.index) == -1))\r\n      }).transition().style('opacity', 0.1);\r\n\r\n    } else {\r\n      // 恢复隐藏的线\r\n      _that.SVG.selectAll('circle').transition().style('opacity', 1);\r\n      // 恢复隐藏的线\r\n      _that.SVG.selectAll('.edge').transition().style('opacity', 1);\r\n      _that.highlighted = null\r\n      _that.dependsNode = []\r\n      _that.dependsLinkAndText = []\r\n    }\r\n  }\r\n\r\n}\r\n\r\nfunction drag(simulation) {\r\n  function dragstarted(event) {\r\n    if (!event.active) simulation.alphaTarget(0.1).restart();\r\n    event.subject.fx = event.subject.x;\r\n    event.subject.fy = event.subject.y;\r\n  }\r\n\r\n  function dragged(event) {\r\n    event.subject.fx = event.x;\r\n    event.subject.fy = event.y;\r\n  }\r\n\r\n  function dragended(event) {\r\n    if (!event.active) simulation.alphaTarget(0);\r\n    event.subject.fx = null;\r\n    event.subject.fy = null;\r\n  }\r\n\r\n  return d3.drag()\r\n    .on(\"start\", dragstarted)\r\n    .on(\"drag\", dragged)\r\n    .on(\"end\", dragended);\r\n}\r\n\r\n// 求两点间的距离\r\nfunction getDis(s, t) {\r\n  return Math.sqrt((s.x - t.x) * (s.x - t.x) + (s.y - t.y) * (s.y - t.y));\r\n}\r\n\r\n// 求元素移动到目标位置所需要的 transform 属性值\r\nfunction getTransform(source, target, _dis) {\r\n  var r;\r\n  if (target.x > source.x) {\r\n    if (target.y > source.y) {\r\n      r = Math.asin((target.y - source.y) / _dis)\r\n    } else {\r\n      r = Math.asin((source.y - target.y) / _dis);\r\n      r = -r;\r\n    }\r\n  } else {\r\n    if (target.y > source.y) {\r\n      r = Math.asin((target.y - source.y) / _dis);\r\n      r = Math.PI - r;\r\n    } else {\r\n      r = Math.asin((source.y - target.y) / _dis);\r\n      r -= Math.PI;\r\n    }\r\n  }\r\n  r = r * (180 / Math.PI);\r\n  return \"translate(\" + source.x + \",\" + source.y + \")rotate(\" + r + \")\";\r\n}"]}]}